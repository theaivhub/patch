(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+jW5":function(t,e,n){"use strict";function i(t,e){if(!(this instanceof i))return new i(t,e);if(this.data=t||[],this.length=this.data.length,this.compare=e||o,this.length>0)for(var n=(this.length>>1)-1;n>=0;n--)this._down(n)}function o(t,e){return t<e?-1:t>e?1:0}t.exports=i,t.exports.default=i,i.prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var t=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),t}},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,n=this.compare,i=e[t];t>0;){var o=t-1>>1,r=e[o];if(n(i,r)>=0)break;e[t]=r,t=o}e[t]=i},_down:function(t){for(var e=this.data,n=this.compare,i=this.length>>1,o=e[t];t<i;){var r=1+(t<<1),a=r+1,s=e[r];if(a<this.length&&n(e[a],s)<0&&(r=a,s=e[a]),n(s,o)>=0)break;e[t]=s,t=r}e[t]=o}}},"0I/V":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"geoArea",function(){return ut}),n.d(i,"geoBounds",function(){return te}),n.d(i,"geoCentroid",function(){return pe}),n.d(i,"geoCircle",function(){return Se}),n.d(i,"geoClipAntimeridian",function(){return Re}),n.d(i,"geoClipCircle",function(){return ke}),n.d(i,"geoClipExtent",function(){return Ue}),n.d(i,"geoClipRectangle",function(){return Ze}),n.d(i,"geoContains",function(){return dn}),n.d(i,"geoDistance",function(){return rn}),n.d(i,"geoGraticule",function(){return vn}),n.d(i,"geoGraticule10",function(){return yn}),n.d(i,"geoInterpolate",function(){return Sn}),n.d(i,"geoLength",function(){return en}),n.d(i,"geoPath",function(){return _i}),n.d(i,"geoAlbers",function(){return ki}),n.d(i,"geoAlbersUsa",function(){return Bi}),n.d(i,"geoAzimuthalEqualArea",function(){return qi}),n.d(i,"geoAzimuthalEqualAreaRaw",function(){return Zi}),n.d(i,"geoAzimuthalEquidistant",function(){return Xi}),n.d(i,"geoAzimuthalEquidistantRaw",function(){return Yi}),n.d(i,"geoConicConformal",function(){return to}),n.d(i,"geoConicConformalRaw",function(){return $i}),n.d(i,"geoConicEqualArea",function(){return Ri}),n.d(i,"geoConicEqualAreaRaw",function(){return Fi}),n.d(i,"geoConicEquidistant",function(){return oo}),n.d(i,"geoConicEquidistantRaw",function(){return io}),n.d(i,"geoEqualEarth",function(){return ho}),n.d(i,"geoEqualEarthRaw",function(){return lo}),n.d(i,"geoEquirectangular",function(){return no}),n.d(i,"geoEquirectangularRaw",function(){return eo}),n.d(i,"geoGnomonic",function(){return fo}),n.d(i,"geoGnomonicRaw",function(){return po}),n.d(i,"geoIdentity",function(){return mo}),n.d(i,"geoProjection",function(){return zi}),n.d(i,"geoProjectionMutator",function(){return Vi}),n.d(i,"geoMercator",function(){return Ji}),n.d(i,"geoMercatorRaw",function(){return Ui}),n.d(i,"geoNaturalEarth1",function(){return yo}),n.d(i,"geoNaturalEarth1Raw",function(){return vo}),n.d(i,"geoOrthographic",function(){return Po}),n.d(i,"geoOrthographicRaw",function(){return bo}),n.d(i,"geoStereographic",function(){return xo}),n.d(i,"geoStereographicRaw",function(){return _o}),n.d(i,"geoTransverseMercator",function(){return Mo}),n.d(i,"geoTransverseMercatorRaw",function(){return So}),n.d(i,"geoRotation",function(){return Pe}),n.d(i,"geoStream",function(){return tt}),n.d(i,"geoTransform",function(){return xi});var o={};n.r(o),n.d(o,"normalizePoint",function(){return ir}),n.d(o,"normalizeMultiline",function(){return or}),n.d(o,"wrapAngleTo180",function(){return rr}),n.d(o,"geoToPoint",function(){return ar});var r={};n.r(r),n.d(r,"Mercator",function(){return Gr}),n.d(r,"Miller",function(){return Ur}),n.d(r,"Eckert6",function(){return Qr}),n.d(r,"Orthographic",function(){return $r}),n.d(r,"Stereographic",function(){return ta}),n.d(r,"Albers",function(){return ea}),n.d(r,"AlbersUsa",function(){return na}),n.d(r,"NaturalEarth1",function(){return ia}),n.d(r,"AzimuthalEqualArea",function(){return oa}),n.d(r,"EqualEarth",function(){return ra}),n.d(r,"Projection",function(){return Jo});var a=n("XnmN"),s=n("VIlf"),u=n("mrSG"),c=n("ld8a"),l=n("B6iY"),h=n("wSV/"),p=n("6rwE"),f=n("hM+/"),d=n("kWzP"),g=n("uqJu"),m=function(){return new v};function v(){this.reset()}v.prototype={constructor:v,reset:function(){this.s=this.t=0},add:function(t){b(y,t,this.t),b(this,y.s,this.s),this.s?this.t+=y.t:this.s=y.t},valueOf:function(){return this.s}};var y=new v;function b(t,e,n){var i=t.s=e+n,o=i-e;t.t=e-(i-o)+(n-o)}var P=1e-6,_=1e-12,x=Math.PI,S=x/2,M=x/4,j=2*x,O=180/x,L=x/180,w=Math.abs,C=Math.atan,E=Math.atan2,I=Math.cos,T=Math.ceil,G=Math.exp,D=(Math,Math.log),N=Math.pow,z=Math.sin,V=Math.sign||function(t){return t>0?1:t<0?-1:0},A=Math.sqrt,F=Math.tan;function R(t){return t>1?0:t<-1?x:Math.acos(t)}function k(t){return t>1?S:t<-1?-S:Math.asin(t)}function B(t){return(t=z(t/2))*t}function W(){}function H(t,e){t&&q.hasOwnProperty(t.type)&&q[t.type](t,e)}var Z={Feature:function(t,e){H(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)H(n[i].geometry,e)}},q={Sphere:function(t,e){e.sphere()},Point:function(t,e){e.point((t=t.coordinates)[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)e.point((t=n[i])[0],t[1],t[2])},LineString:function(t,e){Y(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)Y(n[i],e,0)},Polygon:function(t,e){X(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)X(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)H(n[i],e)}};function Y(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)e.point((i=t[o])[0],i[1],i[2]);e.lineEnd()}function X(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)Y(t[n],e,1);e.polygonEnd()}var U,J,K,Q,$,tt=function(t,e){t&&Z.hasOwnProperty(t.type)?Z[t.type](t,e):H(t,e)},et=m(),nt=m(),it={point:W,lineStart:W,lineEnd:W,polygonStart:function(){et.reset(),it.lineStart=ot,it.lineEnd=rt},polygonEnd:function(){var t=+et;nt.add(t<0?j+t:t),this.lineStart=this.lineEnd=this.point=W},sphere:function(){nt.add(j)}};function ot(){it.point=at}function rt(){st(U,J)}function at(t,e){it.point=st,U=t,J=e,K=t*=L,Q=I(e=(e*=L)/2+M),$=z(e)}function st(t,e){var n=(t*=L)-K,i=n>=0?1:-1,o=i*n,r=I(e=(e*=L)/2+M),a=z(e),s=$*a,u=Q*r+s*I(o),c=s*i*z(o);et.add(E(c,u)),K=t,Q=r,$=a}var ut=function(t){return nt.reset(),tt(t,it),2*nt};function ct(t){return[E(t[1],t[0]),k(t[2])]}function lt(t){var e=t[0],n=t[1],i=I(n);return[i*I(e),i*z(e),z(n)]}function ht(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function pt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function ft(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function dt(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function gt(t){var e=A(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var mt,vt,yt,bt,Pt,_t,xt,St,Mt,jt,Ot=m(),Lt={point:wt,lineStart:Et,lineEnd:It,polygonStart:function(){Lt.point=Tt,Lt.lineStart=Gt,Lt.lineEnd=Dt,Ot.reset(),it.polygonStart()},polygonEnd:function(){it.polygonEnd(),Lt.point=wt,Lt.lineStart=Et,Lt.lineEnd=It,et<0?(mt=-(yt=180),vt=-(bt=90)):Ot>P?bt=90:Ot<-P&&(vt=-90),jt[0]=mt,jt[1]=yt},sphere:function(){mt=-(yt=180),vt=-(bt=90)}};function wt(t,e){Mt.push(jt=[mt=t,yt=t]),e<vt&&(vt=e),e>bt&&(bt=e)}function Ct(t,e){var n=lt([t*L,e*L]);if(St){var i=pt(St,n),o=pt([i[1],-i[0],0],i);gt(o),o=ct(o);var r,a=t-Pt,s=a>0?1:-1,u=o[0]*O*s,c=w(a)>180;c^(s*Pt<u&&u<s*t)?(r=o[1]*O)>bt&&(bt=r):c^(s*Pt<(u=(u+360)%360-180)&&u<s*t)?(r=-o[1]*O)<vt&&(vt=r):(e<vt&&(vt=e),e>bt&&(bt=e)),c?t<Pt?Nt(mt,t)>Nt(mt,yt)&&(yt=t):Nt(t,yt)>Nt(mt,yt)&&(mt=t):yt>=mt?(t<mt&&(mt=t),t>yt&&(yt=t)):t>Pt?Nt(mt,t)>Nt(mt,yt)&&(yt=t):Nt(t,yt)>Nt(mt,yt)&&(mt=t)}else Mt.push(jt=[mt=t,yt=t]);e<vt&&(vt=e),e>bt&&(bt=e),St=n,Pt=t}function Et(){Lt.point=Ct}function It(){jt[0]=mt,jt[1]=yt,Lt.point=wt,St=null}function Tt(t,e){if(St){var n=t-Pt;Ot.add(w(n)>180?n+(n>0?360:-360):n)}else _t=t,xt=e;it.point(t,e),Ct(t,e)}function Gt(){it.lineStart()}function Dt(){Tt(_t,xt),it.lineEnd(),w(Ot)>P&&(mt=-(yt=180)),jt[0]=mt,jt[1]=yt,St=null}function Nt(t,e){return(e-=t)<0?e+360:e}function zt(t,e){return t[0]-e[0]}function Vt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var At,Ft,Rt,kt,Bt,Wt,Ht,Zt,qt,Yt,Xt,Ut,Jt,Kt,Qt,$t,te=function(t){var e,n,i,o,r,a,s;if(bt=yt=-(mt=vt=1/0),Mt=[],tt(t,Lt),n=Mt.length){for(Mt.sort(zt),e=1,r=[i=Mt[0]];e<n;++e)Vt(i,(o=Mt[e])[0])||Vt(i,o[1])?(Nt(i[0],o[1])>Nt(i[0],i[1])&&(i[1]=o[1]),Nt(o[0],i[1])>Nt(i[0],i[1])&&(i[0]=o[0])):r.push(i=o);for(a=-1/0,e=0,i=r[n=r.length-1];e<=n;i=o,++e)(s=Nt(i[1],(o=r[e])[0]))>a&&(a=s,mt=o[0],yt=i[1])}return Mt=jt=null,mt===1/0||vt===1/0?[[NaN,NaN],[NaN,NaN]]:[[mt,vt],[yt,bt]]},ee={sphere:W,point:ne,lineStart:oe,lineEnd:se,polygonStart:function(){ee.lineStart=ue,ee.lineEnd=ce},polygonEnd:function(){ee.lineStart=oe,ee.lineEnd=se}};function ne(t,e){t*=L;var n=I(e*=L);ie(n*I(t),n*z(t),z(e))}function ie(t,e,n){Rt+=(t-Rt)/++At,kt+=(e-kt)/At,Bt+=(n-Bt)/At}function oe(){ee.point=re}function re(t,e){t*=L;var n=I(e*=L);Kt=n*I(t),Qt=n*z(t),$t=z(e),ee.point=ae,ie(Kt,Qt,$t)}function ae(t,e){t*=L;var n=I(e*=L),i=n*I(t),o=n*z(t),r=z(e),a=E(A((a=Qt*r-$t*o)*a+(a=$t*i-Kt*r)*a+(a=Kt*o-Qt*i)*a),Kt*i+Qt*o+$t*r);Ft+=a,Wt+=a*(Kt+(Kt=i)),Ht+=a*(Qt+(Qt=o)),Zt+=a*($t+($t=r)),ie(Kt,Qt,$t)}function se(){ee.point=ne}function ue(){ee.point=le}function ce(){he(Ut,Jt),ee.point=ne}function le(t,e){Ut=t,Jt=e,t*=L,e*=L,ee.point=he;var n=I(e);Kt=n*I(t),Qt=n*z(t),$t=z(e),ie(Kt,Qt,$t)}function he(t,e){t*=L;var n=I(e*=L),i=n*I(t),o=n*z(t),r=z(e),a=Qt*r-$t*o,s=$t*i-Kt*r,u=Kt*o-Qt*i,c=A(a*a+s*s+u*u),l=k(c),h=c&&-l/c;qt+=h*a,Yt+=h*s,Xt+=h*u,Ft+=l,Wt+=l*(Kt+(Kt=i)),Ht+=l*(Qt+(Qt=o)),Zt+=l*($t+($t=r)),ie(Kt,Qt,$t)}var pe=function(t){At=Ft=Rt=kt=Bt=Wt=Ht=Zt=qt=Yt=Xt=0,tt(t,ee);var e=qt,n=Yt,i=Xt,o=e*e+n*n+i*i;return o<_&&(e=Wt,n=Ht,i=Zt,Ft<P&&(e=Rt,n=kt,i=Bt),(o=e*e+n*n+i*i)<_)?[NaN,NaN]:[E(n,e)*O,k(i/A(o))*O]},fe=function(t){return function(){return t}},de=function(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n};function ge(t,e){return[w(t)>x?t+Math.round(-t/j)*j:t,e]}function me(t,e,n){return(t%=j)?e||n?de(ye(t),be(e,n)):ye(t):e||n?be(e,n):ge}function ve(t){return function(e,n){return[(e+=t)>x?e-j:e<-x?e+j:e,n]}}function ye(t){var e=ve(t);return e.invert=ve(-t),e}function be(t,e){var n=I(t),i=z(t),o=I(e),r=z(e);function a(t,e){var a=I(e),s=I(t)*a,u=z(t)*a,c=z(e),l=c*n+s*i;return[E(u*o-l*r,s*n-c*i),k(l*o+u*r)]}return a.invert=function(t,e){var a=I(e),s=I(t)*a,u=z(t)*a,c=z(e),l=c*o-u*r;return[E(u*o+c*r,s*n+l*i),k(l*n-s*i)]},a}ge.invert=ge;var Pe=function(t){function e(e){return(e=t(e[0]*L,e[1]*L))[0]*=O,e[1]*=O,e}return t=me(t[0]*L,t[1]*L,t.length>2?t[2]*L:0),e.invert=function(e){return(e=t.invert(e[0]*L,e[1]*L))[0]*=O,e[1]*=O,e},e};function _e(t,e,n,i,o,r){if(n){var a=I(e),s=z(e),u=i*n;null==o?(o=e+i*j,r=e-u/2):(o=xe(a,o),r=xe(a,r),(i>0?o<r:o>r)&&(o+=i*j));for(var c,l=o;i>0?l>r:l<r;l-=u)c=ct([a,-s*I(l),-s*z(l)]),t.point(c[0],c[1])}}function xe(t,e){(e=lt(e))[0]-=t,gt(e);var n=R(-e[1]);return((-e[2]<0?-n:n)+j-P)%j}var Se=function(){var t,e,n=fe([0,0]),i=fe(90),o=fe(6),r={point:function(n,i){t.push(n=e(n,i)),n[0]*=O,n[1]*=O}};function a(){var a=n.apply(this,arguments),s=i.apply(this,arguments)*L,u=o.apply(this,arguments)*L;return t=[],e=me(-a[0]*L,-a[1]*L,0).invert,_e(r,s,u,1),a={type:"Polygon",coordinates:[t]},t=e=null,a}return a.center=function(t){return arguments.length?(n="function"==typeof t?t:fe([+t[0],+t[1]]),a):n},a.radius=function(t){return arguments.length?(i="function"==typeof t?t:fe(+t),a):i},a.precision=function(t){return arguments.length?(o="function"==typeof t?t:fe(+t),a):o},a},Me=function(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:W,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}},je=function(t,e){return w(t[0]-e[0])<P&&w(t[1]-e[1])<P};function Oe(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}var Le=function(t,e,n,i,o){var r,a,s=[],u=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],a=t[e];if(je(i,a)){for(o.lineStart(),r=0;r<e;++r)o.point((i=t[r])[0],i[1]);o.lineEnd()}else s.push(n=new Oe(i,t,null,!0)),u.push(n.o=new Oe(i,null,n,!1)),s.push(n=new Oe(a,t,null,!1)),u.push(n.o=new Oe(a,null,n,!0))}}),s.length){for(u.sort(e),we(s),we(u),r=0,a=u.length;r<a;++r)u[r].e=n=!n;for(var c,l,h=s[0];;){for(var p=h,f=!0;p.v;)if((p=p.n)===h)return;c=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(r=0,a=c.length;r<a;++r)o.point((l=c[r])[0],l[1]);else i(p.x,p.n.x,1,o);p=p.n}else{if(f)for(r=(c=p.p.z).length-1;r>=0;--r)o.point((l=c[r])[0],l[1]);else i(p.x,p.p.x,-1,o);p=p.p}c=(p=p.o).z,f=!f}while(!p.v);o.lineEnd()}}};function we(t){if(e=t.length){for(var e,n,i=0,o=t[0];++i<e;)o.n=n=t[i],n.p=o,o=n;o.n=n=t[0],n.p=o}}var Ce=m();function Ee(t){return w(t[0])<=x?t[0]:V(t[0])*((w(t[0])+x)%j-x)}var Ie,Te,Ge=function(t,e){var n=Ee(e),i=e[1],o=z(i),r=[z(n),-I(n),0],a=0,s=0;Ce.reset(),1===o?i=S+P:-1===o&&(i=-S-P);for(var u=0,c=t.length;u<c;++u)if(h=(l=t[u]).length)for(var l,h,p=l[h-1],f=Ee(p),d=p[1]/2+M,g=z(d),m=I(d),v=0;v<h;++v,f=b,g=O,m=L,p=y){var y=l[v],b=Ee(y),_=y[1]/2+M,O=z(_),L=I(_),w=b-f,C=w>=0?1:-1,T=C*w,G=T>x,D=g*O;if(Ce.add(E(D*C*z(T),m*L+D*I(T))),a+=G?w+C*j:w,G^f>=n^b>=n){var N=pt(lt(p),lt(y));gt(N);var V=pt(r,N);gt(V);var A=(G^w>=0?-1:1)*k(V[2]);(i>A||i===A&&(N[0]||N[1]))&&(s+=G^w>=0?1:-1)}}return(a<-P||a<P&&Ce<-P)^1&s},De=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN};1===(Ie=De).length&&(Te=Ie,Ie=function(t,e){return De(Te(t),e)});var Ne=function(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var i=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),r=new Array(o);++i<o;)r[i]=t+i*n;return r};Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var ze=function(t){for(var e,n,i,o=t.length,r=-1,a=0;++r<o;)a+=t[r].length;for(n=new Array(a);--o>=0;)for(e=(i=t[o]).length;--e>=0;)n[--a]=i[e];return n},Ve=function(t,e,n,i){return function(o){var r,a,s,u=e(o),c=Me(),l=e(c),h=!1,p={point:f,lineStart:g,lineEnd:m,polygonStart:function(){p.point=v,p.lineStart=y,p.lineEnd=b,a=[],r=[]},polygonEnd:function(){p.point=f,p.lineStart=g,p.lineEnd=m,a=ze(a);var t=Ge(r,i);a.length?(h||(o.polygonStart(),h=!0),Le(a,Fe,t,n,o)):t&&(h||(o.polygonStart(),h=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),h&&(o.polygonEnd(),h=!1),a=r=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function f(e,n){t(e,n)&&o.point(e,n)}function d(t,e){u.point(t,e)}function g(){p.point=d,u.lineStart()}function m(){p.point=f,u.lineEnd()}function v(t,e){s.push([t,e]),l.point(t,e)}function y(){l.lineStart(),s=[]}function b(){v(s[0][0],s[0][1]),l.lineEnd();var t,e,n,i,u=l.clean(),p=c.result(),f=p.length;if(s.pop(),r.push(s),s=null,f)if(1&u){if((e=(n=p[0]).length-1)>0){for(h||(o.polygonStart(),h=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else f>1&&2&u&&p.push(p.pop().concat(p.shift())),a.push(p.filter(Ae))}return p}};function Ae(t){return t.length>1}function Fe(t,e){return((t=t.x)[0]<0?t[1]-S-P:S-t[1])-((e=e.x)[0]<0?e[1]-S-P:S-e[1])}var Re=Ve(function(){return!0},function(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,a){var s=r>0?x:-x,u=w(r-n);w(u-x)<P?(t.point(n,i=(i+a)/2>0?S:-S),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(s,i),t.point(r,i),e=0):o!==s&&u>=x&&(w(n-o)<P&&(n-=o*P),w(r-s)<P&&(r-=s*P),i=function(t,e,n,i){var o,r,a=z(t-n);return w(a)>P?C((z(e)*(r=I(i))*z(n)-z(i)*(o=I(e))*z(t))/(o*r*a)):(e+i)/2}(n,i,r,a),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(s,i),e=0),t.point(n=r,i=a),o=s},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}},function(t,e,n,i){var o;if(null==t)i.point(-x,o=n*S),i.point(0,o),i.point(x,o),i.point(x,0),i.point(x,-o),i.point(0,-o),i.point(-x,-o),i.point(-x,0),i.point(-x,o);else if(w(t[0]-e[0])>P){var r=t[0]<e[0]?x:-x;i.point(-r,o=n*r/2),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])},[-x,-S]),ke=function(t){var e=I(t),n=6*L,i=e>0,o=w(e)>P;function r(t,n){return I(t)*I(n)>e}function a(t,n,i){var o=[1,0,0],r=pt(lt(t),lt(n)),a=ht(r,r),s=r[0],u=a-s*s;if(!u)return!i&&t;var c=e*a/u,l=-e*s/u,h=pt(o,r),p=dt(o,c);ft(p,dt(r,l));var f=h,d=ht(p,f),g=ht(f,f),m=d*d-g*(ht(p,p)-1);if(!(m<0)){var v=A(m),y=dt(f,(-d-v)/g);if(ft(y,p),y=ct(y),!i)return y;var b,_=t[0],S=n[0],M=t[1],j=n[1];S<_&&(b=_,_=S,S=b);var O=S-_,L=w(O-x)<P;if(!L&&j<M&&(b=M,M=j,j=b),L||O<P?L?M+j>0^y[1]<(w(y[0]-_)<P?M:j):M<=y[1]&&y[1]<=j:O>x^(_<=y[0]&&y[0]<=S)){var C=dt(f,(-d+v)/g);return ft(C,p),[y,ct(C)]}}}function s(e,n){var o=i?t:x-t,r=0;return e<-o?r|=1:e>o&&(r|=2),n<-o?r|=4:n>o&&(r|=8),r}return Ve(r,function(t){var e,n,u,c,l;return{lineStart:function(){c=u=!1,l=1},point:function(h,p){var f,d=[h,p],g=r(h,p),m=i?g?0:s(h,p):g?s(h+(h<0?x:-x),p):0;if(!e&&(c=u=g)&&t.lineStart(),g!==u&&(!(f=a(e,d))||je(e,f)||je(d,f))&&(d[0]+=P,d[1]+=P,g=r(d[0],d[1])),g!==u)l=0,g?(t.lineStart(),f=a(d,e),t.point(f[0],f[1])):(f=a(e,d),t.point(f[0],f[1]),t.lineEnd()),e=f;else if(o&&e&&i^g){var v;m&n||!(v=a(d,e,!0))||(l=0,i?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!g||e&&je(e,d)||t.point(d[0],d[1]),e=d,u=g,n=m},lineEnd:function(){u&&t.lineEnd(),e=null},clean:function(){return l|(c&&u)<<1}}},function(e,i,o,r){_e(r,t,n,o,e,i)},i?[0,-t]:[-x,t-x])},Be=function(t,e,n,i,o,r){var a,s=t[0],u=t[1],c=0,l=1,h=e[0]-s,p=e[1]-u;if(a=n-s,h||!(a>0)){if(a/=h,h<0){if(a<c)return;a<l&&(l=a)}else if(h>0){if(a>l)return;a>c&&(c=a)}if(a=o-s,h||!(a<0)){if(a/=h,h<0){if(a>l)return;a>c&&(c=a)}else if(h>0){if(a<c)return;a<l&&(l=a)}if(a=i-u,p||!(a>0)){if(a/=p,p<0){if(a<c)return;a<l&&(l=a)}else if(p>0){if(a>l)return;a>c&&(c=a)}if(a=r-u,p||!(a<0)){if(a/=p,p<0){if(a>l)return;a>c&&(c=a)}else if(p>0){if(a<c)return;a<l&&(l=a)}return c>0&&(t[0]=s+c*h,t[1]=u+c*p),l<1&&(e[0]=s+l*h,e[1]=u+l*p),!0}}}}},We=1e9,He=-We;function Ze(t,e,n,i){function o(o,r){return t<=o&&o<=n&&e<=r&&r<=i}function r(o,r,s,c){var l=0,h=0;if(null==o||(l=a(o,s))!==(h=a(r,s))||u(o,r)<0^s>0)do{c.point(0===l||3===l?t:n,l>1?i:e)}while((l=(l+s+4)%4)!==h);else c.point(r[0],r[1])}function a(i,o){return w(i[0]-t)<P?o>0?0:3:w(i[0]-n)<P?o>0?2:1:w(i[1]-e)<P?o>0?1:0:o>0?3:2}function s(t,e){return u(t.x,e.x)}function u(t,e){var n=a(t,1),i=a(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var u,c,l,h,p,f,d,g,m,v,y,b=a,P=Me(),_={point:x,lineStart:function(){_.point=S,c&&c.push(l=[]),v=!0,m=!1,d=g=NaN},lineEnd:function(){u&&(S(h,p),f&&m&&P.rejoin(),u.push(P.result())),_.point=x,m&&b.lineEnd()},polygonStart:function(){b=P,u=[],c=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,o=c.length;n<o;++n)for(var r,a,s=c[n],u=1,l=s.length,h=s[0],p=h[0],f=h[1];u<l;++u)r=p,a=f,p=(h=s[u])[0],f=h[1],a<=i?f>i&&(p-r)*(i-a)>(f-a)*(t-r)&&++e:f<=i&&(p-r)*(i-a)<(f-a)*(t-r)&&--e;return e}(),n=y&&e,o=(u=ze(u)).length;(n||o)&&(a.polygonStart(),n&&(a.lineStart(),r(null,null,1,a),a.lineEnd()),o&&Le(u,s,e,r,a),a.polygonEnd()),b=a,u=c=l=null}};function x(t,e){o(t,e)&&b.point(t,e)}function S(r,a){var s=o(r,a);if(c&&l.push([r,a]),v)h=r,p=a,f=s,v=!1,s&&(b.lineStart(),b.point(r,a));else if(s&&m)b.point(r,a);else{var u=[d=Math.max(He,Math.min(We,d)),g=Math.max(He,Math.min(We,g))],P=[r=Math.max(He,Math.min(We,r)),a=Math.max(He,Math.min(We,a))];Be(u,P,t,e,n,i)?(m||(b.lineStart(),b.point(u[0],u[1])),b.point(P[0],P[1]),s||b.lineEnd(),y=!1):s&&(b.lineStart(),b.point(r,a),y=!1)}d=r,g=a,m=s}return _}}var qe,Ye,Xe,Ue=function(){var t,e,n,i=0,o=0,r=960,a=500;return n={stream:function(n){return t&&e===n?t:t=Ze(i,o,r,a)(e=n)},extent:function(s){return arguments.length?(i=+s[0][0],o=+s[0][1],r=+s[1][0],a=+s[1][1],t=e=null,n):[[i,o],[r,a]]}}},Je=m(),Ke={sphere:W,point:W,lineStart:function(){Ke.point=$e,Ke.lineEnd=Qe},lineEnd:W,polygonStart:W,polygonEnd:W};function Qe(){Ke.point=Ke.lineEnd=W}function $e(t,e){qe=t*=L,Ye=z(e*=L),Xe=I(e),Ke.point=tn}function tn(t,e){t*=L;var n=z(e*=L),i=I(e),o=w(t-qe),r=I(o),a=i*z(o),s=Xe*n-Ye*i*r,u=Ye*n+Xe*i*r;Je.add(E(A(a*a+s*s),u)),qe=t,Ye=n,Xe=i}var en=function(t){return Je.reset(),tt(t,Ke),+Je},nn=[null,null],on={type:"LineString",coordinates:nn},rn=function(t,e){return nn[0]=t,nn[1]=e,en(on)},an={Feature:function(t,e){return un(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)if(un(n[i].geometry,e))return!0;return!1}},sn={Sphere:function(){return!0},Point:function(t,e){return cn(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(cn(n[i],e))return!0;return!1},LineString:function(t,e){return ln(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(ln(n[i],e))return!0;return!1},Polygon:function(t,e){return hn(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)if(hn(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)if(un(n[i],e))return!0;return!1}};function un(t,e){return!(!t||!sn.hasOwnProperty(t.type))&&sn[t.type](t,e)}function cn(t,e){return 0===rn(t,e)}function ln(t,e){for(var n,i,o,r=0,a=t.length;r<a;r++){if(0===(i=rn(t[r],e)))return!0;if(r>0&&(o=rn(t[r],t[r-1]))>0&&n<=o&&i<=o&&(n+i-o)*(1-Math.pow((n-i)/o,2))<_*o)return!0;n=i}return!1}function hn(t,e){return!!Ge(t.map(pn),fn(e))}function pn(t){return(t=t.map(fn)).pop(),t}function fn(t){return[t[0]*L,t[1]*L]}var dn=function(t,e){return(t&&an.hasOwnProperty(t.type)?an[t.type]:un)(t,e)};function gn(t,e,n){var i=Ne(t,e-P,n).concat(e);return function(t){return i.map(function(e){return[t,e]})}}function mn(t,e,n){var i=Ne(t,e-P,n).concat(e);return function(t){return i.map(function(e){return[e,t]})}}function vn(){var t,e,n,i,o,r,a,s,u,c,l,h,p=10,f=p,d=90,g=360,m=2.5;function v(){return{type:"MultiLineString",coordinates:y()}}function y(){return Ne(T(i/d)*d,n,d).map(l).concat(Ne(T(s/g)*g,a,g).map(h)).concat(Ne(T(e/p)*p,t,p).filter(function(t){return w(t%d)>P}).map(u)).concat(Ne(T(r/f)*f,o,f).filter(function(t){return w(t%g)>P}).map(c))}return v.lines=function(){return y().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[l(i).concat(h(a).slice(1),l(n).reverse().slice(1),h(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(s=+t[0][1],a=+t[1][1],(i=+t[0][0])>(n=+t[1][0])&&(t=i,i=n,n=t),s>a&&(t=s,s=a,a=t),v.precision(m)):[[i,s],[n,a]]},v.extentMinor=function(n){return arguments.length?(r=+n[0][1],o=+n[1][1],(e=+n[0][0])>(t=+n[1][0])&&(n=e,e=t,t=n),r>o&&(n=r,r=o,o=n),v.precision(m)):[[e,r],[t,o]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(d=+t[0],g=+t[1],v):[d,g]},v.stepMinor=function(t){return arguments.length?(p=+t[0],f=+t[1],v):[p,f]},v.precision=function(p){return arguments.length?(m=+p,u=gn(r,o,90),c=mn(e,t,m),l=gn(s,a,90),h=mn(i,n,m),v):m},v.extentMajor([[-180,-90+P],[180,90-P]]).extentMinor([[-180,-80-P],[180,80+P]])}function yn(){return vn()()}var bn,Pn,_n,xn,Sn=function(t,e){var n=t[0]*L,i=t[1]*L,o=e[0]*L,r=e[1]*L,a=I(i),s=z(i),u=I(r),c=z(r),l=a*I(n),h=a*z(n),p=u*I(o),f=u*z(o),d=2*k(A(B(r-i)+a*u*B(o-n))),g=z(d),m=d?function(t){var e=z(t*=d)/g,n=z(d-t)/g,i=n*l+e*p,o=n*h+e*f,r=n*s+e*c;return[E(o,i)*O,E(r,A(i*i+o*o))*O]}:function(){return[n*O,i*O]};return m.distance=d,m},Mn=function(t){return t},jn=m(),On=m(),Ln={point:W,lineStart:W,lineEnd:W,polygonStart:function(){Ln.lineStart=wn,Ln.lineEnd=In},polygonEnd:function(){Ln.lineStart=Ln.lineEnd=Ln.point=W,jn.add(w(On)),On.reset()},result:function(){var t=jn/2;return jn.reset(),t}};function wn(){Ln.point=Cn}function Cn(t,e){Ln.point=En,bn=_n=t,Pn=xn=e}function En(t,e){On.add(xn*t-_n*e),_n=t,xn=e}function In(){En(bn,Pn)}var Tn,Gn,Dn,Nn,zn=Ln,Vn=1/0,An=Vn,Fn=-Vn,Rn=Fn,kn={point:function(t,e){t<Vn&&(Vn=t),t>Fn&&(Fn=t),e<An&&(An=e),e>Rn&&(Rn=e)},lineStart:W,lineEnd:W,polygonStart:W,polygonEnd:W,result:function(){var t=[[Vn,An],[Fn,Rn]];return Fn=Rn=-(An=Vn=1/0),t}},Bn=0,Wn=0,Hn=0,Zn=0,qn=0,Yn=0,Xn=0,Un=0,Jn=0,Kn={point:Qn,lineStart:$n,lineEnd:ni,polygonStart:function(){Kn.lineStart=ii,Kn.lineEnd=oi},polygonEnd:function(){Kn.point=Qn,Kn.lineStart=$n,Kn.lineEnd=ni},result:function(){var t=Jn?[Xn/Jn,Un/Jn]:Yn?[Zn/Yn,qn/Yn]:Hn?[Bn/Hn,Wn/Hn]:[NaN,NaN];return Bn=Wn=Hn=Zn=qn=Yn=Xn=Un=Jn=0,t}};function Qn(t,e){Bn+=t,Wn+=e,++Hn}function $n(){Kn.point=ti}function ti(t,e){Kn.point=ei,Qn(Dn=t,Nn=e)}function ei(t,e){var n=t-Dn,i=e-Nn,o=A(n*n+i*i);Zn+=o*(Dn+t)/2,qn+=o*(Nn+e)/2,Yn+=o,Qn(Dn=t,Nn=e)}function ni(){Kn.point=Qn}function ii(){Kn.point=ri}function oi(){ai(Tn,Gn)}function ri(t,e){Kn.point=ai,Qn(Tn=Dn=t,Gn=Nn=e)}function ai(t,e){var n=t-Dn,i=e-Nn,o=A(n*n+i*i);Zn+=o*(Dn+t)/2,qn+=o*(Nn+e)/2,Yn+=o,Xn+=(o=Nn*t-Dn*e)*(Dn+t),Un+=o*(Nn+e),Jn+=3*o,Qn(Dn=t,Nn=e)}var si=Kn;function ui(t){this._context=t}ui.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,j)}},result:W};var ci,li,hi,pi,fi,di=m(),gi={point:W,lineStart:function(){gi.point=mi},lineEnd:function(){ci&&vi(li,hi),gi.point=W},polygonStart:function(){ci=!0},polygonEnd:function(){ci=null},result:function(){var t=+di;return di.reset(),t}};function mi(t,e){gi.point=vi,li=pi=t,hi=fi=e}function vi(t,e){di.add(A((pi-=t)*pi+(fi-=e)*fi)),pi=t,fi=e}var yi=gi;function bi(){this._string=[]}function Pi(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}bi.prototype={_radius:4.5,_circle:Pi(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Pi(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var _i=function(t,e){var n,i,o=4.5;function r(t){return t&&("function"==typeof o&&i.pointRadius(+o.apply(this,arguments)),tt(t,n(i))),i.result()}return r.area=function(t){return tt(t,n(zn)),zn.result()},r.measure=function(t){return tt(t,n(yi)),yi.result()},r.bounds=function(t){return tt(t,n(kn)),kn.result()},r.centroid=function(t){return tt(t,n(si)),si.result()},r.projection=function(e){return arguments.length?(n=null==e?(t=null,Mn):(t=e).stream,r):t},r.context=function(t){return arguments.length?(i=null==t?(e=null,new bi):new ui(e=t),"function"!=typeof o&&i.pointRadius(o),r):e},r.pointRadius=function(t){return arguments.length?(o="function"==typeof t?t:(i.pointRadius(+t),+t),r):o},r.projection(t).context(e)},xi=function(t){return{stream:Si(t)}};function Si(t){return function(e){var n=new Mi;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Mi(){}function ji(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),tt(n,t.stream(kn)),e(kn.result()),null!=i&&t.clipExtent(i),t}function Oi(t,e,n){return ji(t,function(n){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],r=Math.min(i/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),a=+e[0][0]+(i-r*(n[1][0]+n[0][0]))/2,s=+e[0][1]+(o-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([a,s])},n)}function Li(t,e,n){return Oi(t,[[0,0],e],n)}function wi(t,e,n){return ji(t,function(n){var i=+e,o=i/(n[1][0]-n[0][0]),r=(i-o*(n[1][0]+n[0][0]))/2,a=-o*n[0][1];t.scale(150*o).translate([r,a])},n)}function Ci(t,e,n){return ji(t,function(n){var i=+e,o=i/(n[1][1]-n[0][1]),r=-o*n[0][0],a=(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([r,a])},n)}Mi.prototype={constructor:Mi,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ei=16,Ii=I(30*L),Ti=function(t,e){return+e?function(t,e){function n(i,o,r,a,s,u,c,l,h,p,f,d,g,m){var v=c-i,y=l-o,b=v*v+y*y;if(b>4*e&&g--){var _=a+p,x=s+f,S=u+d,M=A(_*_+x*x+S*S),j=k(S/=M),O=w(w(S)-1)<P||w(r-h)<P?(r+h)/2:E(x,_),L=t(O,j),C=L[0],I=L[1],T=C-i,G=I-o,D=y*T-v*G;(D*D/b>e||w((v*T+y*G)/b-.5)>.3||a*p+s*f+u*d<Ii)&&(n(i,o,r,a,s,u,C,I,O,_/=M,x/=M,S,g,m),m.point(C,I),n(C,I,O,_,x,S,c,l,h,p,f,d,g,m))}}return function(e){var i,o,r,a,s,u,c,l,h,p,f,d,g={point:m,lineStart:v,lineEnd:b,polygonStart:function(){e.polygonStart(),g.lineStart=P},polygonEnd:function(){e.polygonEnd(),g.lineStart=v}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function v(){l=NaN,g.point=y,e.lineStart()}function y(i,o){var r=lt([i,o]),a=t(i,o);n(l,h,c,p,f,d,l=a[0],h=a[1],c=i,p=r[0],f=r[1],d=r[2],Ei,e),e.point(l,h)}function b(){g.point=m,e.lineEnd()}function P(){v(),g.point=_,g.lineEnd=x}function _(t,e){y(i=t,e),o=l,r=h,a=p,s=f,u=d,g.point=y}function x(){n(l,h,c,p,f,d,o,r,i,a,s,u,Ei,e),g.lineEnd=b,b()}return g}}(t,e):function(t){return Si({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)},Gi=Si({point:function(t,e){this.stream.point(t*L,e*L)}});function Di(t,e,n){function i(i,o){return[e+t*i,n-t*o]}return i.invert=function(i,o){return[(i-e)/t,(n-o)/t]},i}function Ni(t,e,n,i){var o=I(i),r=z(i),a=o*t,s=r*t,u=o/t,c=r/t,l=(r*n-o*e)/t,h=(r*e+o*n)/t;function p(t,i){return[a*t-s*i+e,n-s*t-a*i]}return p.invert=function(t,e){return[u*t-c*e+l,h-c*t-u*e]},p}function zi(t){return Vi(function(){return t})()}function Vi(t){var e,n,i,o,r,a,s,u,c,l,h=150,p=480,f=250,d=0,g=0,m=0,v=0,y=0,b=0,P=null,_=Re,x=null,S=Mn,M=.5;function j(t){return u(t[0]*L,t[1]*L)}function w(t){return(t=u.invert(t[0],t[1]))&&[t[0]*O,t[1]*O]}function C(){var t=Ni(h,0,0,b).apply(null,e(d,g)),i=(b?Ni:Di)(h,p-t[0],f-t[1],b);return n=me(m,v,y),s=de(e,i),u=de(n,s),a=Ti(s,M),E()}function E(){return c=l=null,j}return j.stream=function(t){return c&&l===t?c:c=Gi(function(t){return Si({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(_(a(S(l=t)))))},j.preclip=function(t){return arguments.length?(_=t,P=void 0,E()):_},j.postclip=function(t){return arguments.length?(S=t,x=i=o=r=null,E()):S},j.clipAngle=function(t){return arguments.length?(_=+t?ke(P=t*L):(P=null,Re),E()):P*O},j.clipExtent=function(t){return arguments.length?(S=null==t?(x=i=o=r=null,Mn):Ze(x=+t[0][0],i=+t[0][1],o=+t[1][0],r=+t[1][1]),E()):null==x?null:[[x,i],[o,r]]},j.scale=function(t){return arguments.length?(h=+t,C()):h},j.translate=function(t){return arguments.length?(p=+t[0],f=+t[1],C()):[p,f]},j.center=function(t){return arguments.length?(d=t[0]%360*L,g=t[1]%360*L,C()):[d*O,g*O]},j.rotate=function(t){return arguments.length?(m=t[0]%360*L,v=t[1]%360*L,y=t.length>2?t[2]%360*L:0,C()):[m*O,v*O,y*O]},j.angle=function(t){return arguments.length?(b=t%360*L,C()):b*O},j.precision=function(t){return arguments.length?(a=Ti(s,M=t*t),E()):A(M)},j.fitExtent=function(t,e){return Oi(j,t,e)},j.fitSize=function(t,e){return Li(j,t,e)},j.fitWidth=function(t,e){return wi(j,t,e)},j.fitHeight=function(t,e){return Ci(j,t,e)},function(){return e=t.apply(this,arguments),j.invert=e.invert&&w,C()}}function Ai(t){var e=0,n=x/3,i=Vi(t),o=i(e,n);return o.parallels=function(t){return arguments.length?i(e=t[0]*L,n=t[1]*L):[e*O,n*O]},o}function Fi(t,e){var n=z(t),i=(n+z(e))/2;if(w(i)<P)return function(e){var n=I(t);function i(t,e){return[t*n,z(e)/n]}return i.invert=function(t,e){return[t/n,k(e*n)]},i}();var o=1+n*(2*i-n),r=A(o)/i;function a(t,e){var n=A(o-2*i*z(e))/i;return[n*z(t*=i),r-n*I(t)]}return a.invert=function(t,e){var n=r-e;return[E(t,w(n))/i*V(n),k((o-(t*t+n*n)*i*i)/(2*i))]},a}var Ri=function(){return Ai(Fi).scale(155.424).center([0,33.6442])},ki=function(){return Ri().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])},Bi=function(){var t,e,n,i,o,r,a=ki(),s=Ri().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=Ri().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){r=[t,e]}};function l(t){var e=t[0],a=t[1];return r=null,n.point(e,a),r||(i.point(e,a),r)||(o.point(e,a),r)}function h(){return t=e=null,l}return l.invert=function(t){var e=a.scale(),n=a.translate(),i=(t[0]-n[0])/e,o=(t[1]-n[1])/e;return(o>=.12&&o<.234&&i>=-.425&&i<-.214?s:o>=.166&&o<.234&&i>=-.214&&i<-.115?u:a).invert(t)},l.stream=function(n){return t&&e===n?t:(i=[a.stream(e=n),s.stream(n),u.stream(n)],o=i.length,t={point:function(t,e){for(var n=-1;++n<o;)i[n].point(t,e)},sphere:function(){for(var t=-1;++t<o;)i[t].sphere()},lineStart:function(){for(var t=-1;++t<o;)i[t].lineStart()},lineEnd:function(){for(var t=-1;++t<o;)i[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<o;)i[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<o;)i[t].polygonEnd()}});var i,o},l.precision=function(t){return arguments.length?(a.precision(t),s.precision(t),u.precision(t),h()):a.precision()},l.scale=function(t){return arguments.length?(a.scale(t),s.scale(.35*t),u.scale(t),l.translate(a.translate())):a.scale()},l.translate=function(t){if(!arguments.length)return a.translate();var e=a.scale(),r=+t[0],l=+t[1];return n=a.translate(t).clipExtent([[r-.455*e,l-.238*e],[r+.455*e,l+.238*e]]).stream(c),i=s.translate([r-.307*e,l+.201*e]).clipExtent([[r-.425*e+P,l+.12*e+P],[r-.214*e-P,l+.234*e-P]]).stream(c),o=u.translate([r-.205*e,l+.212*e]).clipExtent([[r-.214*e+P,l+.166*e+P],[r-.115*e-P,l+.234*e-P]]).stream(c),h()},l.fitExtent=function(t,e){return Oi(l,t,e)},l.fitSize=function(t,e){return Li(l,t,e)},l.fitWidth=function(t,e){return wi(l,t,e)},l.fitHeight=function(t,e){return Ci(l,t,e)},l.scale(1070)};function Wi(t){return function(e,n){var i=I(e),o=I(n),r=t(i*o);return[r*o*z(e),r*z(n)]}}function Hi(t){return function(e,n){var i=A(e*e+n*n),o=t(i),r=z(o),a=I(o);return[E(e*r,i*a),k(i&&n*r/i)]}}var Zi=Wi(function(t){return A(2/(1+t))});Zi.invert=Hi(function(t){return 2*k(t/2)});var qi=function(){return zi(Zi).scale(124.75).clipAngle(179.999)},Yi=Wi(function(t){return(t=R(t))&&t/z(t)});Yi.invert=Hi(function(t){return t});var Xi=function(){return zi(Yi).scale(79.4188).clipAngle(179.999)};function Ui(t,e){return[t,D(F((S+e)/2))]}Ui.invert=function(t,e){return[t,2*C(G(e))-S]};var Ji=function(){return Ki(Ui).scale(961/j)};function Ki(t){var e,n,i,o=zi(t),r=o.center,a=o.scale,s=o.translate,u=o.clipExtent,c=null;function l(){var r=x*a(),s=o(Pe(o.rotate()).invert([0,0]));return u(null==c?[[s[0]-r,s[1]-r],[s[0]+r,s[1]+r]]:t===Ui?[[Math.max(s[0]-r,c),e],[Math.min(s[0]+r,n),i]]:[[c,Math.max(s[1]-r,e)],[n,Math.min(s[1]+r,i)]])}return o.scale=function(t){return arguments.length?(a(t),l()):a()},o.translate=function(t){return arguments.length?(s(t),l()):s()},o.center=function(t){return arguments.length?(r(t),l()):r()},o.clipExtent=function(t){return arguments.length?(null==t?c=e=n=i=null:(c=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),l()):null==c?null:[[c,e],[n,i]]},l()}function Qi(t){return F((S+t)/2)}function $i(t,e){var n=I(t),i=t===e?z(t):D(n/I(e))/D(Qi(e)/Qi(t)),o=n*N(Qi(t),i)/i;if(!i)return Ui;function r(t,e){o>0?e<-S+P&&(e=-S+P):e>S-P&&(e=S-P);var n=o/N(Qi(e),i);return[n*z(i*t),o-n*I(i*t)]}return r.invert=function(t,e){var n=o-e,r=V(i)*A(t*t+n*n);return[E(t,w(n))/i*V(n),2*C(N(o/r,1/i))-S]},r}var to=function(){return Ai($i).scale(109.5).parallels([30,30])};function eo(t,e){return[t,e]}eo.invert=eo;var no=function(){return zi(eo).scale(152.63)};function io(t,e){var n=I(t),i=t===e?z(t):(n-I(e))/(e-t),o=n/i+t;if(w(i)<P)return eo;function r(t,e){var n=o-e,r=i*t;return[n*z(r),o-n*I(r)]}return r.invert=function(t,e){var n=o-e;return[E(t,w(n))/i*V(n),o-V(i)*A(t*t+n*n)]},r}var oo=function(){return Ai(io).scale(131.154).center([0,13.9389])},ro=1.340264,ao=-.081106,so=893e-6,uo=.003796,co=A(3)/2;function lo(t,e){var n=k(co*z(e)),i=n*n,o=i*i*i;return[t*I(n)/(co*(ro+3*ao*i+o*(7*so+9*uo*i))),n*(ro+ao*i+o*(so+uo*i))]}lo.invert=function(t,e){for(var n,i=e,o=i*i,r=o*o*o,a=0;a<12&&(r=(o=(i-=n=(i*(ro+ao*o+r*(so+uo*o))-e)/(ro+3*ao*o+r*(7*so+9*uo*o)))*i)*o*o,!(w(n)<_));++a);return[co*t*(ro+3*ao*o+r*(7*so+9*uo*o))/I(i),k(z(i)/co)]};var ho=function(){return zi(lo).scale(177.158)};function po(t,e){var n=I(e),i=I(t)*n;return[n*z(t)/i,z(e)/i]}po.invert=Hi(C);var fo=function(){return zi(po).scale(144.049).clipAngle(60)};function go(t,e,n,i){return 1===t&&1===e&&0===n&&0===i?Mn:Si({point:function(o,r){this.stream.point(o*t+n,r*e+i)}})}var mo=function(){var t,e,n,i,o,r,a=1,s=0,u=0,c=1,l=1,h=Mn,p=null,f=Mn;function d(){return i=o=null,r}return r={stream:function(t){return i&&o===t?i:i=h(f(o=t))},postclip:function(i){return arguments.length?(f=i,p=t=e=n=null,d()):f},clipExtent:function(i){return arguments.length?(f=null==i?(p=t=e=n=null,Mn):Ze(p=+i[0][0],t=+i[0][1],e=+i[1][0],n=+i[1][1]),d()):null==p?null:[[p,t],[e,n]]},scale:function(t){return arguments.length?(h=go((a=+t)*c,a*l,s,u),d()):a},translate:function(t){return arguments.length?(h=go(a*c,a*l,s=+t[0],u=+t[1]),d()):[s,u]},reflectX:function(t){return arguments.length?(h=go(a*(c=t?-1:1),a*l,s,u),d()):c<0},reflectY:function(t){return arguments.length?(h=go(a*c,a*(l=t?-1:1),s,u),d()):l<0},fitExtent:function(t,e){return Oi(r,t,e)},fitSize:function(t,e){return Li(r,t,e)},fitWidth:function(t,e){return wi(r,t,e)},fitHeight:function(t,e){return Ci(r,t,e)}}};function vo(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(i*(.003971*n-.001529*i)-.013791)),e*(1.007226+n*(.015085+i*(.028874*n-.044475-.005916*i)))]}vo.invert=function(t,e){var n,i=e,o=25;do{var r=i*i,a=r*r;i-=n=(i*(1.007226+r*(.015085+a*(.028874*r-.044475-.005916*a)))-e)/(1.007226+r*(.045255+a*(.259866*r-.311325-.005916*11*a)))}while(w(n)>P&&--o>0);return[t/(.8707+(r=i*i)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),i]};var yo=function(){return zi(vo).scale(175.295)};function bo(t,e){return[I(e)*z(t),z(e)]}bo.invert=Hi(k);var Po=function(){return zi(bo).scale(249.5).clipAngle(90+P)};function _o(t,e){var n=I(e),i=1+I(t)*n;return[n*z(t)/i,z(e)/i]}_o.invert=Hi(function(t){return 2*C(t)});var xo=function(){return zi(_o).scale(250).clipAngle(142)};function So(t,e){return[D(F((S+e)/2)),-t]}So.invert=function(t,e){return[-e,2*C(G(t))-S]};var Mo=function(){var t=Ki(So),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},jo=function(t){function e(){var e=t.call(this)||this;return e.className="MapSeriesDataItem",e.values.value={},e.applyTheme(),e}return Object(u.__extends)(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.values.value.value},set:function(t){this.setValue("value",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.properties.zoomLevel},set:function(t){this.setProperty("zoomLevel",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomGeoPoint",{get:function(){return this.properties.zoomGeoPoint},set:function(t){this.setProperty("zoomGeoPoint",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return this._east},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return this._west},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return this._south},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return this._north},enumerable:!0,configurable:!0}),e.prototype.updateExtremes=function(){var t=this.getFeature().geometry;if(t){var e=te(t),n=e[0][0],i=e[0][1],o=e[1][1],r=e[1][0],a=!1;o!=this.north&&(this._north=g.round(o,6),a=!0),i!=this.south&&(this._south=g.round(i,6),a=!0),r!=this.east&&(this._east=g.round(r,6),a=!0),n!=this.west&&(this._west=g.round(n,6),a=!0),this._east<this._west&&(this._east=180,this._west=-180),a&&this.component.invalidateDataItems()}},e.prototype.getFeature=function(){return{}},e}(p.b),Oo=function(t){function e(){var e=t.call(this)||this;return e.className="MapSeries",e.isMeasured=!1,e.nonScalingStroke=!0,e.dataFields.value="value",e.ignoreBounds=!1,e.tooltip&&(e.tooltip.showInViewport=!0),e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new jo},e.prototype.checkInclude=function(t,e,n){if(t){if(0==t.length)return!1;if(-1==t.indexOf(n))return!1}return!(e&&e.length>0&&-1!=e.indexOf(n))},Object.defineProperty(e.prototype,"useGeodata",{get:function(){return this.getPropertyValue("useGeodata")},set:function(t){this.setPropertyValue("useGeodata",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"include",{get:function(){return this.getPropertyValue("include")},set:function(t){this.setPropertyValue("include",t)&&this.processIncExc()},enumerable:!0,configurable:!0}),e.prototype.processIncExc=function(){this.invalidateData()},Object.defineProperty(e.prototype,"ignoreBounds",{get:function(){return this.getPropertyValue("ignoreBounds")},set:function(t){this.setPropertyValue("ignoreBounds",t)&&this.chart&&this.chart.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclude",{get:function(){return this.getPropertyValue("exclude")},set:function(t){this.setPropertyValue("exclude",t)&&this.processIncExc()},enumerable:!0,configurable:!0}),e.prototype.handleObjectAdded=function(t){var e=t.newValue;e.parent=this,e.series=this,e.strokeWidth=e.strokeWidth},Object.defineProperty(e.prototype,"geodata",{get:function(){return this._geodata},set:function(t){if(t!=this._geodata){this._geodata=t;for(var e=this.data.length-1;e>=0;e--)1==this.data[e].madeFromGeoData&&this.data.splice(e,1);this.disposeData(),this.invalidateData()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geodataSource",{get:function(){return this._dataSources.geodata||this.getDataSource("geodata"),this._dataSources.geodata},set:function(t){var e=this;this._dataSources.geodata&&this.removeDispose(this._dataSources.geodata),this._dataSources.geodata=t,this._dataSources.geodata.component=this,this.events.on("inited",function(){e.loadData("geodata")},void 0,!1),this.setDataSourceEvents(t,"geodata")},enumerable:!0,configurable:!0}),e.prototype.getFeatures=function(){},e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.updateExtremes()},e.prototype.updateExtremes=function(){var t,e,n,i;this.dataItems.each(function(o){(o.north>t||!d.isNumber(t))&&(t=o.north),(o.south<e||!d.isNumber(e))&&(e=o.south),(o.west<i||!d.isNumber(i))&&(i=o.west),(o.east>n||!d.isNumber(n))&&(n=o.east)}),this._mapObjects&&this._mapObjects.each(function(o){(o.north>t||!d.isNumber(t))&&(t=o.north),(o.south<e||!d.isNumber(e))&&(e=o.south),(o.west<i||!d.isNumber(i))&&(i=o.west),(o.east>n||!d.isNumber(n))&&(n=o.east)}),this.north==t&&this.east==n&&this.south==e&&this.west==i||(this._north=t,this._east=n,this._west=i,this._south=e,this.dispatch("geoBoundsChanged"),this.ignoreBounds||this.chart.updateExtremes())},Object.defineProperty(e.prototype,"north",{get:function(){return d.isNumber(this._northDefined)?this._northDefined:this._north},set:function(t){this._northDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return d.isNumber(this._southDefined)?this._southDefined:this._south},set:function(t){this._southDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return d.isNumber(this._westDefined)?this._westDefined:this._west},set:function(t){this._westDefined=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"east",{get:function(){return d.isNumber(this._eastDefined)?this._eastDefined:this._east},set:function(t){this._eastDefined=t},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(d.hasValue(e.geodata)&&d.isString(e.geodata)){var n=e.geodata;if(d.hasValue(window["am4geodata_"+e.geodata]))e.geodata=window["am4geodata_"+e.geodata];else try{e.geodata=JSON.parse(e.geodata)}catch(i){throw Error("MapChart error: Geodata `"+n+"` is not loaded or is incorrect.")}}t.prototype.processConfig.call(this,e)},e.prototype.asIs=function(e){return"geodata"==e||t.prototype.asIs.call(this,e)},e.prototype.updateTooltipBounds=function(){this.tooltip&&this.topParent&&this.tooltip.setBounds({x:10,y:10,width:this.topParent.maxWidth-20,height:this.topParent.maxHeight-20})},e}(p.a);f.c.registeredClasses.MapSeries=Oo,f.c.registeredClasses.MapSeriesDataItem=jo;var Lo=n("vjOD"),wo=function(t){function e(){var e=t.call(this)||this;return e.className="MapObject",e.isMeasured=!1,e.layout="none",e.clickable=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.validate=function(){this.series&&(this.readerTitle=this.series.itemReaderText),t.prototype.validate.call(this)},e.prototype.updateExtremes=function(){var t=this.getFeature();if(t){var e=t.geometry;if(e){var n=te(e),i=n[0][0],o=n[0][1],r=n[1][1],a=n[1][0],s=!1;r!=this.north&&(this._north=g.round(r,8),s=!0),o!=this.south&&(this._south=g.round(o),s=!0),a!=this.east&&(this._east=g.round(a),s=!0),i!=this.west&&(this._west=g.round(i),s=!0),s&&(this.dispatch("geoBoundsChanged"),this.series&&this.series.invalidateDataItems())}}},e.prototype.getFeature=function(){return{}},Object.defineProperty(e.prototype,"east",{get:function(){return d.isNumber(this._east)?this._east:this.dataItem?this.dataItem.east:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"west",{get:function(){return d.isNumber(this._west)?this._west:this.dataItem?this.dataItem.west:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"south",{get:function(){return d.isNumber(this._south)?this._south:this.dataItem?this.dataItem.south:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"north",{get:function(){return d.isNumber(this._north)?this._north:this.dataItem?this.dataItem.north:void 0},enumerable:!0,configurable:!0}),e.prototype.showTooltip=function(e){var n=t.prototype.showTooltip.call(this,e);return n&&"always"==this.showTooltipOn&&!this.series.chart.events.has("mappositionchanged",this.handleTooltipMove,this)&&this.series.chart.events.on("mappositionchanged",this.handleTooltipMove,this),n},e.prototype.handleTooltipMove=function(t){this.showTooltip()},e}(Lo.a);f.c.registeredClasses.MapObject=wo;var Co=function(t){function e(){var e=t.call(this)||this;return e.className="MapImage",e.applyTheme(),e}return Object(u.__extends)(e,t),Object.defineProperty(e.prototype,"latitude",{get:function(){return this.getPropertyValue("latitude")},set:function(t){this.setPropertyValue("latitude",t,!1,!0),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.getPropertyValue("longitude")},set:function(t){this.setPropertyValue("longitude",t,!1,!0),this.updateExtremes()},enumerable:!0,configurable:!0}),e.prototype.validatePosition=function(){if(d.isNumber(this.latitude)&&d.isNumber(this.longitude)){var e=this.series.chart.projection.d3Projection([this.longitude,this.latitude]),n=this.series.chart.projection.d3Path({type:"Point",coordinates:[this.longitude,this.latitude]});this.__disabled=!n,this.moveTo({x:e[0],y:e[1]})}t.prototype.validatePosition.call(this)},e.prototype.getFeature=function(){return{type:"Feature",geometry:{type:"Point",coordinates:[this.longitude,this.latitude]}}},e}(wo);f.c.registeredClasses.MapImage=Co;var Eo=n("4So7"),Io=n("mYRP"),To=n.n(Io),Go=n("bg8p");function Do(t){return Go.map(t,function(t){var e=t[0],n=t[1],i=[];return e&&i.push(zo(e)),n&&i.push(zo(n)),i})}function No(t){return Go.map(t,function(t){return zo(t)})}function zo(t){return Go.map(t,function(t){return Ao(t)})}function Vo(t){return Go.map(t,Fo)}function Ao(t){return{longitude:t[0],latitude:t[1]}}function Fo(t){return[t.longitude,t.latitude]}function Ro(t){return Go.map(t,function(t){return Go.map(t,Fo)})}function ko(t){return Go.map(t,function(t){var e=t[0],n=t[1],i=[];return e&&i.push(Vo(e)),n&&i.push(Vo(n)),i})}function Bo(t,e,n){return[Se().center([t,e]).radius(n)().coordinates]}function Wo(t,e,n,i){var o=[];-180==i&&(i=-179.9999),-90==n&&(n=-89.9999),90==t&&(t=89.9999),180==e&&(e=179.9999);for(var r=Math.min(90,(e-i)/Math.ceil((e-i)/90)),a=(t-n)/Math.ceil((t-n)/90),s=i;s<e;s+=r){var u=[];o.push([u]),s+r>e&&(r=e-s);for(var c=s;c<=s+r;c+=5)u.push([c,t]);for(var l=t;l>=n;l-=a)u.push([s+r,l]);for(c=s+r;c>=s;c-=5)u.push([c,n]);for(l=n;l<=t;l+=a)u.push([s,l])}return o}var Ho=function(t){function e(){var e=t.call(this)||this;e.className="MapPolygon",e.polygon=e.createChild(Eo.a),e.polygon.shouldClone=!1,e.polygon.applyOnClones=!0,e.setPropertyValue("precision",.5);var n=new h.a;return e.fill=n.getFor("secondaryButton"),e.stroke=n.getFor("secondaryButtonStroke"),e.strokeOpacity=1,e.tooltipPosition="pointer",e.nonScalingStroke=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.getFeature=function(){if(this.multiPolygon&&this.multiPolygon.length>0)return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:this.multiPolygon}}},Object.defineProperty(e.prototype,"multiGeoPolygon",{get:function(){var t=this.getPropertyValue("multiGeoPolygon");return!t&&this.dataItem&&(t=this.dataItem.multiGeoPolygon),t},set:function(t){this.setPropertyValue("multiGeoPolygon",t,!0),this.multiPolygon=ko(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiPolygon",{get:function(){var t=this.getPropertyValue("multiPolygon");return!t&&this.dataItem&&(t=this.dataItem.multiPolygon),t},set:function(t){this.setPropertyValue("multiPolygon",t)&&(this.updateExtremes(),this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.validate=function(){if(this.series){var e=this.series.chart.projection,n=e.d3Path;if(this.multiPolygon){if(this.series){var i={type:"MultiPolygon",coordinates:this.multiPolygon};e.d3Projection.precision(this.precision),this.polygon.path=n(i)}if(this.series.calculateVisualCenter){var o=0,r=this.multiPolygon[0];if(this.multiPolygon.length>1)for(var a=0;a<this.multiPolygon.length;a++){var s=this.multiPolygon[a],u=ut({type:"Polygon",coordinates:s});u>o&&(r=s,o=u)}var c=To()(r);this._visualLongitude=c[0],this._visualLatitude=c[1]}else this._visualLongitude=this.longitude,this._visualLatitude=this.latitude}}t.prototype.validate.call(this)},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"latitude",{get:function(){return this.north+(this.south-this.north)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.east+(this.west-this.east)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visualLatitude",{get:function(){var t=this.getPropertyValue("visualLatitude");return d.isNumber(t)?t:this._adapterO?this._adapterO.apply("visualLatitude",this._visualLatitude):this._visualLatitude},set:function(t){this.setPropertyValue("visualLatitude",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visualLongitude",{get:function(){var t=this.getPropertyValue("visualLongitude");return d.isNumber(t)?t:this._adapterO?this._adapterO.apply("visualLongitude",this._visualLongitude):this._visualLongitude},set:function(t){this.setPropertyValue("visualLongitude",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelWidth",{get:function(){return this.polygon.pixelWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pixelHeight",{get:function(){return this.polygon.pixelHeight},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.polygon.copyFrom(e.polygon)},e.prototype.updateExtremes=function(){t.prototype.updateExtremes.call(this)},Object.defineProperty(e.prototype,"boxArea",{get:function(){return(this.north-this.south)*(this.east-this.west)},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){return this.series.chart.projection.convert({longitude:this.visualLongitude,latitude:this.visualLatitude}).x},e.prototype.getTooltipY=function(){return this.series.chart.projection.convert({longitude:this.visualLongitude,latitude:this.visualLatitude}).y},Object.defineProperty(e.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(t){this.setPropertyValue("precision",t,!0)},enumerable:!0,configurable:!0}),e}(wo);f.c.registeredClasses.MapPolygon=Ho;var Zo=n("8sDm"),qo=n("IILc"),Yo=n("A1fN"),Xo=function(t){function e(){var e=t.call(this)||this;return e.className="MapPolygonSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.getFeature=function(){if(this.multiPolygon&&this.multiPolygon.length>0)return{type:"Feature",geometry:{type:"MultiPolygon",coordinates:this.multiPolygon}}},Object.defineProperty(e.prototype,"mapPolygon",{get:function(){var t=this;if(!this._mapPolygon){var e=this.component.mapPolygons.create();this._mapPolygon=e,this.addSprite(e),this._disposers.push(new l.b(function(){t.component&&t.component.mapPolygons.removeValue(e)})),this.mapObject=e}return this._mapPolygon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"polygon",{get:function(){return this._polygon},set:function(t){this._polygon=t,this.multiPolygon=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiPolygon",{get:function(){return this._multiPolygon},set:function(t){this._multiPolygon=t,this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoPolygon",{get:function(){return this._geoPolygon},set:function(t){this._geoPolygon=t,this.multiGeoPolygon=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiGeoPolygon",{get:function(){return this._multiGeoPolygon},set:function(t){this._multiGeoPolygon=t,this.multiPolygon=ko(t)},enumerable:!0,configurable:!0}),e}(jo),Uo=function(t){function e(){var e=t.call(this)||this;return e.calculateVisualCenter=!1,e.className="MapPolygonSeries",e.dataFields.multiPolygon="multiPolygon",e.dataFields.polygon="polygon",e.dataFields.geoPolygon="geoPolygon",e.dataFields.multiGeoPolygon="multiGeoPolygon",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new Xo},e.prototype.processIncExc=function(){this.mapPolygons.clear(),t.prototype.processIncExc.call(this)},e.prototype.validateData=function(){if(this.useGeodata||this.geodata){var e=this._dataSources.geodata?void 0:this.chart.geodata;if(this.geodata&&(e=this.geodata),e){var n=void 0;if("FeatureCollection"==e.type?n=e.features:"Feature"==e.type?n=[e]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(e.type)?n=[{geometry:e}]:console.log("nothing found in geoJSON"),n)for(var i=function(t,e){var i=n[t],r=i.geometry;if(r){var a=r.type,s=i.id;if(o.chart.geodataNames&&o.chart.geodataNames[s]&&(i.properties.name=o.chart.geodataNames[s]),"Polygon"==a||"MultiPolygon"==a){if(!o.checkInclude(o.include,o.exclude,s))return"continue";var u=r.coordinates;u&&"Polygon"==a&&(u=[u]);var c=Go.find(o.data,function(t,e){return t.id==s});c?c.multiPolygon||(c.multiPolygon=u):o.data.push(c={multiPolygon:u,id:s,madeFromGeoData:!0}),qo.softCopyProperties(i.properties,c)}}},o=this,r=0,a=n.length;r<a;r++)i(r)}}t.prototype.validateData.call(this)},e.prototype.validate=function(){t.prototype.validate.call(this),this.dataItems.each(function(t){qo.used(t.mapPolygon)}),this.mapPolygons.each(function(t){t.validate(),t.zIndex||t.propertyFields.zIndex||(t.zIndex=1e6-t.boxArea)})},Object.defineProperty(e.prototype,"mapPolygons",{get:function(){if(!this._mapPolygons){var t=new Ho,e=new Zo.e(t);this._disposers.push(new Zo.c(e)),this._disposers.push(e.template),e.template.focusable=!0,e.events.on("inserted",this.handleObjectAdded,this,!1),this._mapPolygons=e,this._mapObjects=e}return this._mapPolygons},enumerable:!0,configurable:!0}),e.prototype.getPolygonById=function(t){return Yo.find(this.mapPolygons.iterator(),function(e){return e.dataItem.dataContext.id==t})},e.prototype.copyFrom=function(e){this.mapPolygons.template.copyFrom(e.mapPolygons.template),t.prototype.copyFrom.call(this,e)},e.prototype.getFeatures=function(){var t=this,e=[];return this.dataItems.each(function(t){var n=t.getFeature();n&&e.push(n)}),this.mapPolygons.each(function(n){if(-1==t.dataItems.indexOf(n._dataItem)){var i=n.getFeature();i&&e.push(i)}}),e},e}(Oo);f.c.registeredClasses.MapPolygonSeries=Uo,f.c.registeredClasses.MapPolygonSeriesDataItem=Xo;var Jo=function(){function t(){this.d3Projection=no()}return Object.defineProperty(t.prototype,"d3Projection",{get:function(){return this._d3Projection},set:function(t){this._d3Projection=t,t.precision(.1),this._d3Path=_i().projection(t),this.chart&&this.chart.invalidateProjection()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"d3Path",{get:function(){return this._d3Path},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scale",{get:function(){return this.d3Projection.scale()/100},enumerable:!0,configurable:!0}),t.prototype.convert=function(t){var e=this.d3Projection([t.longitude,t.latitude]);if(e)return{x:e[0],y:e[1]}},t.prototype.invert=function(t){var e=this.d3Projection.invert([t.x,t.y]);if(e)return{longitude:e[0],latitude:e[1]}},t.prototype.project=function(t,e){return this.convert({longitude:t*g.DEGREES,latitude:e*g.DEGREES})},t.prototype.unproject=function(t,e){return this.invert({x:t,y:e})},t.prototype.rotate=function(t,e,n,i){var o=n*g.RADIANS;i*=g.RADIANS;var r=t.longitude*g.RADIANS+e*g.RADIANS,a=t.latitude*g.RADIANS,s=Math.cos(o),u=Math.sin(o),c=Math.cos(i),l=Math.sin(i),h=Math.cos(a),p=Math.cos(r)*h,f=Math.sin(r)*h,d=Math.sin(a),m=d*s+p*u;return{longitude:g.DEGREES*Math.atan2(f*c-m*l,p*s-d*u),latitude:g.DEGREES*Math.asin(m*c+f*l)}},t.prototype.unrotate=function(t,e,n,i){var o=n*g.RADIANS;i*=g.RADIANS;var r=t.longitude*g.RADIANS-e*g.RADIANS,a=t.latitude*g.RADIANS,s=Math.cos(o),u=Math.sin(o),c=Math.cos(i),l=Math.sin(i),h=Math.cos(a),p=Math.cos(r)*h,f=Math.sin(r)*h,d=Math.sin(a),m=d*c-f*l;return{longitude:g.DEGREES*Math.atan2(f*c+d*l,p*s+m*u),latitude:g.DEGREES*Math.asin(m*s-p*u)}},t.prototype.intermediatePoint=function(t,e,n){var i=Sn([t.longitude,t.latitude],[e.longitude,e.latitude])(n);return{longitude:i[0],latitude:i[1]}},t.prototype.multiDistance=function(t){for(var e=0,n=0;n<t.length;n++){var i=t[n];if(i.length>1)for(var o=1;o<i.length;o++)e+=this.distance(i[o-1],i[o])}return e},t.prototype.distance=function(t,e){return rn([t.longitude,t.latitude],[e.longitude,e.latitude])},t.prototype.positionToPoint=function(t,e){if(t){var n=this.positionToGeoPoint(t,e),i=this.positionToGeoPoint(t,e-.01),o=this.positionToGeoPoint(t,e+.01);if(i&&o){var r=this.convert(n),a=this.convert(i),s=this.convert(o);return{x:r.x,y:r.y,angle:g.getAngle(a,s)}}}return{x:0,y:0,angle:0}},t.prototype.positionToGeoPoint=function(t,e){if(t){for(var n=this.multiDistance(t),i=0,o=0,r=0,a=void 0,s=void 0,u=0;u<t.length;u++){var c=t[u];if(c.length>1){for(var l=1;l<c.length;l++)if(o=i/n,r=(i+=this.distance(a=c[l-1],s=c[l]))/n,o<=e&&r>e){u=t.length;break}}else 1==c.length&&(a=c[0],s=c[0],o=0,r=1)}if(a&&s)return this.intermediatePoint(a,s,(e-o)/(r-o))}return{longitude:0,latitude:0}},t}();f.c.registeredClasses.Projection=Jo;var Ko=n("8MWo"),Qo=n("2zdI"),$o=n("A9VE"),tr=function(t){function e(){var e=t.call(this)||this;e._chart=new l.d,e.className="SmallMap",e.align="left",e.valign="bottom",e.percentHeight=20,e.percentWidth=20,e.margin(5,5,5,5);var n=new h.a;e.background.fillOpacity=.9,e.background.fill=n.getFor("background"),e.events.on("hit",e.moveToPosition,e,!1),e.events.on("maxsizechanged",e.updateMapSize,e,!1),e.seriesContainer=e.createChild(Lo.a),e.seriesContainer.shouldClone=!1;var i=e.createChild(Qo.a);return i.shouldClone=!1,i.stroke=n.getFor("alternativeBackground"),i.strokeWidth=1,i.strokeOpacity=.5,i.fill=Object($o.c)(),i.verticalCenter="middle",i.horizontalCenter="middle",i.isMeasured=!1,i.visible=!1,e.rectangle=i,e._disposers.push(e._chart),e.applyTheme(),e}return Object(u.__extends)(e,t),Object.defineProperty(e.prototype,"series",{get:function(){return this._series||(this._series=new Zo.b,this._series.events.on("inserted",this.handleSeriesAdded,this,!1),this._series.events.on("removed",this.handleSeriesRemoved,this,!1)),this._series},enumerable:!0,configurable:!0}),e.prototype.handleSeriesAdded=function(t){var e=t.newValue;if(this.chart.series.contains(e)){var n=e.clone();this._series.removeValue(e),this._series.push(n),e=n,this.chart.dataUsers.push(n)}e.chart=this.chart,e.parent=this.seriesContainer,e.interactionsEnabled=!1,e.events.on("inited",this.updateMapSize,this,!1),e.hidden=!1},e.prototype.handleSeriesRemoved=function(t){this.invalidate()},e.prototype.moveToPosition=function(t){var e=qo.spritePointToSprite(t.spritePoint,this,this.seriesContainer),n=this.chart.seriesPointToGeo(e);this.chart.zoomToGeoPoint(n,this.chart.zoomLevel,!0)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){this.chart!=t&&this._chart.set(t,new l.c([t.events.on("mappositionchanged",this.updateRectangle,this,!1),t.events.on("scaleratiochanged",this.updateMapSize,this,!1)]))},enumerable:!0,configurable:!0}),e.prototype.updateRectangle=function(){var t=this.chart,e=t.zoomLevel,n=this.rectangle;n.width=this.pixelWidth/e,n.height=this.pixelHeight/e;var i=Math.min(this.percentWidth,this.percentHeight)/100,o=t.seriesContainer;n.x=Math.ceil(-o.pixelX*i/e)+this.seriesContainer.pixelX,n.y=Math.ceil(-o.pixelY*i/e)+this.seriesContainer.pixelY,n.validate()},e.prototype.updateMapSize=function(){if(this.chart){var t=this.chart.scaleRatio*Math.min(this.percentWidth,this.percentHeight)/100;this.seriesContainer.scale=t;var e={width:0,height:0,x:0,y:0};try{e=this.seriesContainer.group.node.getBBox()}catch(n){}e.width>0&&(this.rectangle.visible=!0),this.seriesContainer.x=this.pixelWidth/2-e.x*t-e.width/2*t,this.seriesContainer.y=this.pixelHeight/2-e.y*t-e.height/2*t,this.updateRectangle(),this.afterDraw()}},e.prototype.afterDraw=function(){t.prototype.afterDraw.call(this),this.rectangle.maskRectangle={x:-1,y:-1,width:Math.ceil(this.pixelWidth+2),height:Math.ceil(this.pixelHeight+2)}},e.prototype.processConfig=function(e){if(e&&d.hasValue(e.series)&&d.isArray(e.series))for(var n=0,i=e.series.length;n<i;n++){var o=e.series[n];d.hasValue(o)&&d.isString(o)&&this.map.hasKey(o)&&(e.series[n]=this.map.getKey(o))}t.prototype.processConfig.call(this,e)},e}(Lo.a);f.c.registeredClasses.SmallMap=tr;var er=n("BOQn"),nr=n("7AON");function ir(t){var e=rr(t.longitude),n=Math.asin(Math.sin(t.latitude*g.RADIANS))*g.DEGREES,i=rr(t.latitude);return Math.abs(i)>90&&(e=rr(e+180)),t.longitude=e,t.latitude=n,t}function or(t){return Go.each(t,function(t){Go.each(t,function(t){ir(t)})}),t}function rr(t){return(t%=360)>180&&(t-=360),t<-180&&(t+=360),t}function ar(t){return{x:t.longitude,y:t.latitude}}var sr=function(t){function e(){var e=t.call(this)||this;return e.adjustRotation=!0,e.className="MapLineObject",e.isMeasured=!1,e.layout="none",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.validatePosition=function(){var e=this.mapLine;if(e){var n=e.positionToPoint(this.position);if(this.x=n.x,this.y=n.y,this.adjustRotation&&(this.rotation=n.angle),this.mapLine.dataItem&&(this.scale=1/this.mapLine.dataItem.component.scale),e.shortestDistance){var i=this.mapLine.series.chart.projection,o=i.positionToGeoPoint(e.multiGeoLine,this.position),r=i.d3Path({type:"Point",coordinates:[o.longitude,o.latitude]});this.__disabled=!r}}t.prototype.validatePosition.call(this)},Object.defineProperty(e.prototype,"position",{get:function(){return this.getPropertyValue("position")},set:function(t){this.setPropertyValue("position",t,!1,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"adjustRotation",{get:function(){return this.getPropertyValue("adjustRotation")},set:function(t){this.setPropertyValue("adjustRotation",t,!1,!0)},enumerable:!0,configurable:!0}),e}(Lo.a);f.c.registeredClasses.MapLineObject=sr;var ur=function(t){function e(){var e=t.call(this)||this;return e.className="MapImageSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.getFeature=function(){return{type:"Feature",geometry:{type:"Point",coordinates:this.point}}},Object.defineProperty(e.prototype,"mapImage",{get:function(){var t=this;if(!this._mapImage){var e=this.component.mapImages.create();this.addSprite(e),this._mapImage=e,this._disposers.push(e),this._disposers.push(new l.b(function(){t.component&&t.component.mapImages.removeValue(e)})),this.mapObject=e}return this._mapImage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"point",{get:function(){return this._point},set:function(t){this._point=t,this._geoPoint=Ao(t),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoPoint",{get:function(){return this._geoPoint},set:function(t){this._geoPoint=t,this.point=[t.longitude,t.latitude]},enumerable:!0,configurable:!0}),e}(jo),cr=function(t){function e(){var e=t.call(this)||this;return e.className="MapImageSeries",e.dataFields.multiPoint="multiPoint",e.dataFields.point="point",e.dataFields.geoPoint="geoPoint",e.dataFields.multiGeoPoint="multiGeoPoint",e.ignoreBounds=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new ur},e.prototype.validateData=function(){var e=this;if(this.data.length>0&&0==this._parseDataFrom&&this.mapImages.clear(),this.useGeodata&&(this.useGeodata||this.geodata)){var n=this.chart.geodata,i=void 0;if("FeatureCollection"==n.type?i=n.features:"Feature"==n.type?i=[n]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(n.type)?i=[{geometry:n}]:console.log("nothing found in geoJSON"),i)for(var o=function(t,e){var n=i[t],o=n.geometry;if(o){var a=o.type,s=n.id;if("Point"==a||"MultiPoint"==a){if(!r.checkInclude(r.include,r.exclude,s))return"continue";var u=o.coordinates;"Point"==a&&(u=[u]);var c=Go.find(r.data,function(t,e){return t.id==s});c?c.multiPoint||(c.multiPoint=u):r.data.push(c={multiPoint:u,id:s,madeFromGeoData:!0}),qo.softCopyProperties(n.properties,c)}}},r=this,a=0,s=i.length;a<s;a++)o(a)}t.prototype.validateData.call(this),Yo.each(this.dataItems.iterator(),function(t){var n=t.mapImage;n.isDisposed()||(e.mapImages.moveValue(n),d.isNumber(n.latitude)&&d.isNumber(n.latitude)&&(t.geoPoint={latitude:n.latitude,longitude:n.longitude}))})},Object.defineProperty(e.prototype,"mapImages",{get:function(){if(!this._mapImages){var t=new Co,e=new Zo.e(t);this._disposers.push(new Zo.c(e)),this._disposers.push(e.template),e.template.focusable=!0,e.events.on("inserted",this.handleObjectAdded,this,!1),this._mapImages=e,this._mapObjects=e}return this._mapImages},enumerable:!0,configurable:!0}),e.prototype.validateDataElement=function(e){t.prototype.validateDataElement.call(this,e),e.mapImage.invalidate()},e.prototype.validate=function(){t.prototype.validate.call(this),Yo.each(this.mapImages.iterator(),function(t){t.validatePosition()})},e.prototype.copyFrom=function(e){this.mapImages.template.copyFrom(e.mapImages.template),t.prototype.copyFrom.call(this,e)},e.prototype.getFeatures=function(){var t=this,e=[];return this.dataItems.each(function(t){var n=t.getFeature();n&&e.push(n)}),this.mapImages.each(function(n){if(-1==t.dataItems.indexOf(n._dataItem)){var i=n.getFeature();i&&e.push(i)}}),e},e.prototype.getImageById=function(t){return Yo.find(this.mapImages.iterator(),function(e){var n=e.dataItem.dataContext;if(e.id==t||n&&n.id==t)return!0})},e}(Oo);f.c.registeredClasses.MapImageSeries=cr,f.c.registeredClasses.MapImageSeriesDataItem=ur;var lr=n("P1hn"),hr=n("bhfn"),pr=n("K4eF"),fr=function(t){function e(){var e=t.call(this)||this;e._imageListeners={},e.className="MapLine",e.createLine(),e.line.stroke=Object($o.c)(),e.line.parent=e,e.strokeOpacity=1,e.setPropertyValue("precision",.1);var n=new h.a;return e.stroke=n.getFor("grid"),e.shortestDistance=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createLine=function(){this.line=new hr.a},e.prototype.positionToPoint=function(t){return this.shortestDistance?this.series.chart.projection.positionToPoint(this.multiGeoLine,t):this.line?this.line.positionToPoint(t):{x:0,y:0,angle:0}},Object.defineProperty(e.prototype,"multiGeoLine",{get:function(){var t=this.getPropertyValue("multiGeoLine");return!t&&this.dataItem&&this.dataItem.multiGeoLine&&(t=this.dataItem.multiGeoLine),t},set:function(t){if(t&&t.length>0){this.setPropertyValue("multiGeoLine",or(t),!0);var e=Ro(t);this.setPropertyValue("multiLine",e),this.updateExtremes()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiLine",{get:function(){var t=this.getPropertyValue("multiLine");return!t&&this.dataItem&&this.dataItem.multiLine&&(t=this.dataItem.multiLine),t},set:function(t){this.setPropertyValue("multiLine",t),this.multiGeoLine=No(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imagesToConnect",{get:function(){return this.getPropertyValue("imagesToConnect")},set:function(t){var e=this;if(this.setPropertyValue("imagesToConnect",t,!0),this.handleImagesToConnect(),this.series){var n=this.series.chart;n&&n.series.each(function(t){t instanceof cr&&(t.isReady()||e._disposers.push(t.events.on("ready",e.handleImagesToConnect,e,!1)))})}},enumerable:!0,configurable:!0}),e.prototype.handleImagesToConnect=function(){var t,e,n=this;if(this.imagesToConnect){var i=[],o=[i],r=function(t){if(d.isString(t)){var e=a.series.chart;e&&e.series.each(function(e){if(e instanceof cr){var n=e.getImageById(t);n&&(t=n)}})}if(t instanceof Co&&(i.push({longitude:t.longitude,latitude:t.latitude}),!a._imageListeners[t.uid])){var o=t.events.on("propertychanged",function(t){"longitude"!=t.property&&"latitude"!=t.property||(n.handleImagesToConnect(),n.invalidate())},a,!1);a._imageListeners[t.uid]=o,a._disposers.push(o)}},a=this;try{for(var s=Object(u.__values)(this.imagesToConnect),c=s.next();!c.done;c=s.next())r(c.value)}catch(l){t={error:l}}finally{try{c&&!c.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}this.multiGeoLine=o}},e.prototype.validate=function(){var e=this.series.chart;if(this.multiLine){if(this.shortestDistance)e.projection.d3Projection.precision(this.precision),this.line.path=e.projection.d3Path(this.getFeature());else{for(var n=[],i=0,o=this.multiLine.length;i<o;i++){for(var r=this.multiLine[i],a=[],s=0,u=r.length;s<u;s++){var c=r[s],l=this.series.chart.projection.convert({longitude:c[0],latitude:c[1]});a.push(l)}n.push(a)}this.line.segments=n}this._arrow&&this._arrow.validatePosition(),Yo.each(this.lineObjects.iterator(),function(t){t.validatePosition()}),this.handleGlobalScale()}else this.imagesToConnect&&this.handleImagesToConnect();t.prototype.validate.call(this)},e.prototype.getFeature=function(){if(this.multiLine&&this.multiLine.length>0&&this.multiLine[0]&&this.multiLine[0].length>0)return{type:"Feature",geometry:{type:"MultiLineString",coordinates:this.multiLine}}},e.prototype.measureElement=function(){},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return this.getPropertyValue("shortestDistance")},set:function(t){this.setPropertyValue("shortestDistance",t,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineObjects",{get:function(){return this._lineObjects||(this._lineObjects=new Zo.e(new sr),this._lineObjects.events.on("inserted",this.handleLineObjectAdded,this,!1),this._disposers.push(new Zo.c(this._lineObjects)),this._disposers.push(this._lineObjects.template)),this._lineObjects},enumerable:!0,configurable:!0}),e.prototype.handleLineObjectAdded=function(t){var e=t.newValue;e.mapLine=this,e.shouldClone=!1,e.parent=this},Object.defineProperty(e.prototype,"arrow",{get:function(){if(!this._arrow){var t=this.createChild(sr);t.shouldClone=!1,t.width=8,t.height=10,t.mapLine=this,t.position=.5;var e=t.createChild(lr.a);e.fillOpacity=1,e.width=Object(pr.c)(100),e.height=Object(pr.c)(100),e.rotation=90,e.horizontalCenter="middle",e.verticalCenter="middle",this._arrow=t}return this._arrow},set:function(t){this._arrow=t,t.mapLine=this,t.parent=this},enumerable:!0,configurable:!0}),e.prototype.copyFrom=function(e){t.prototype.copyFrom.call(this,e),this.line.copyFrom(e.line),this.lineObjects.copyFrom(e.lineObjects),e._arrow&&(this.arrow=e.arrow.clone())},Object.defineProperty(e.prototype,"latitude",{get:function(){return this.north+(this.south-this.north)/2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this.east+(this.west-this.east)/2},enumerable:!0,configurable:!0}),e.prototype.getTooltipX=function(){var t=this.getPropertyValue("tooltipX");return t instanceof pr.a||(t=Object(pr.c)(50)),t instanceof pr.a?this.positionToPoint(t.value).x:0},e.prototype.getTooltipY=function(){var t=this.getPropertyValue("tooltipY");return t instanceof pr.a||(t=Object(pr.c)(50)),t instanceof pr.a?this.positionToPoint(t.value).y:0},Object.defineProperty(e.prototype,"precision",{get:function(){return this.getPropertyValue("precision")},set:function(t){this.setPropertyValue("precision",t,!0)},enumerable:!0,configurable:!0}),e}(wo);f.c.registeredClasses.MapLine=fr;var dr=function(t){function e(){var e=t.call(this)||this;return e.className="MapLineSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.getFeature=function(){if(this.multiLine&&this.multiLine.length>0)return{type:"Feature",geometry:{type:"MultiLineString",coordinates:this.multiLine}}},Object.defineProperty(e.prototype,"mapLine",{get:function(){var t=this;if(!this._mapLine){var e=this.component.mapLines.create();this._mapLine=e,this.addSprite(e),this._disposers.push(e),this._disposers.push(new l.b(function(){t.component&&t.component.mapLines.removeValue(e)})),this.mapObject=e}return this._mapLine},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._line},set:function(t){this._line=t,this.multiLine=[t]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiLine",{get:function(){return this._multiLine},set:function(t){this._multiLine=t,this._multiGeoLine=No(t),this.updateExtremes()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"geoLine",{get:function(){return this._geoLine},set:function(t){this._geoLine=t,this.multiLine=Ro([t])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multiGeoLine",{get:function(){return this._multiGeoLine},set:function(t){this._multiGeoLine=t,this.multiLine=Ro(t)},enumerable:!0,configurable:!0}),e}(jo),gr=function(t){function e(){var e=t.call(this)||this;return e.className="MapLineSeries",e.dataFields.multiLine="multiLine",e.dataFields.line="line",e.dataFields.geoLine="geoLine",e.dataFields.multiGeoLine="multiGeoLine",e.ignoreBounds=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new dr},e.prototype.validateData=function(){if(this.useGeodata||this.geodata){var e=this.chart.geodata;if(e){var n=void 0;if("FeatureCollection"==e.type?n=e.features:"Feature"==e.type?n=[e]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(e.type)?n=[{geometry:e}]:console.log("nothing found in geoJSON"),n)for(var i=function(t,e){var i=n[t],r=i.geometry;if(r){var a=r.type,s=i.id;if("LineString"==a||"MultiLineString"==a){if(!o.checkInclude(o.include,o.exclude,s))return"continue";var u=r.coordinates,c=Go.find(o.data,function(t,e){return t.id==s});"LineString"==a&&(u=[u]),c?c.multiLine||(c.multiLine=u):o.data.push(c={multiLine:u,id:s,madeFromGeoData:!0}),qo.softCopyProperties(i.properties,c)}}},o=this,r=0,a=n.length;r<a;r++)i(r)}}t.prototype.validateData.call(this)},Object.defineProperty(e.prototype,"mapLines",{get:function(){if(!this._mapLines){var t=this.createLine(),e=new Zo.e(t);this._disposers.push(new Zo.c(e)),this._disposers.push(e.template),e.events.on("inserted",this.handleObjectAdded,this,!1),this._mapLines=e,this._mapObjects=e}return this._mapLines},enumerable:!0,configurable:!0}),e.prototype.createLine=function(){return new fr},e.prototype.validate=function(){this.dataItems.each(function(t){qo.used(t.mapLine)}),t.prototype.validate.call(this),this.mapLines.each(function(t){t.validate()})},e.prototype.copyFrom=function(e){this.mapLines.template.copyFrom(e.mapLines.template),t.prototype.copyFrom.call(this,e)},e.prototype.getFeatures=function(){var t=this,e=[];return this.dataItems.each(function(t){var n=t.getFeature();n&&e.push(n)}),this.mapLines.each(function(n){if(-1==t.dataItems.indexOf(n._dataItem)){var i=n.getFeature();i&&e.push(i)}}),e},e.prototype.getLineById=function(t){return Yo.find(this.mapLines.iterator(),function(e){return e.dataItem.dataContext.id==t})},e}(Oo);f.c.registeredClasses.MapLineSeries=gr,f.c.registeredClasses.MapLineSeriesDataItem=dr;var mr=function(t){function e(){var e=t.call(this)||this;return e.className="Graticule",e.applyTheme(),e.shortestDistance=!0,e}return Object(u.__extends)(e,t),e}(fr);f.c.registeredClasses.Graticule=mr;var vr=function(t){function e(){var e=t.call(this)||this;return e.className="GraticuleSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e}(dr),yr=function(t){function e(){var e=t.call(this)||this;return e.className="GraticuleSeries",e.longitudeStep=10,e.latitudeStep=10,e.north=90,e.south=-90,e.east=-180,e.west=180,e.fitExtent=!0,e.singleSprite=!0,e.events.disableType("geoBoundsChanged"),e.mapLines.template.line.strokeOpacity=.08,e.ignoreBounds=!1,e.hiddenInLegend=!0,e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new vr},e.prototype.validateData=function(){var e=this;t.prototype.validateData.call(this),this.mapLines.clear();var n=vn();if(n){n.stepMinor([this.longitudeStep,this.latitudeStep]),n.stepMajor([360,360]);var i=this.chart;if(n.extent(this.fitExtent?[[i.east,i.north],[i.west,i.south]]:[[this.east,this.north],[this.west,this.south]]),this.singleSprite)this.mapLines.create().multiLine=n().coordinates;else{var o=n.lines();Go.each(o,function(t){e.mapLines.create().multiLine=[t.coordinates]})}}},e.prototype.createLine=function(){return new mr},Object.defineProperty(e.prototype,"latitudeStep",{get:function(){return this.getPropertyValue("latitudeStep")},set:function(t){this.setPropertyValue("latitudeStep",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longitudeStep",{get:function(){return this.getPropertyValue("longitudeStep")},set:function(t){this.setPropertyValue("longitudeStep",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitExtent",{get:function(){return this.getPropertyValue("fitExtent")},set:function(t){this.setPropertyValue("fitExtent",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleSprite",{get:function(){return this.getPropertyValue("singleSprite")},set:function(t){this.setPropertyValue("singleSprite",t)&&this.invalidateData()},enumerable:!0,configurable:!0}),e}(gr);f.c.registeredClasses.GraticuleSeries=yr,f.c.registeredClasses.GraticuleSeriesDataItem=vr;var br=n("4kOV"),Pr=function(t){function e(){var e=t.call(this)||this;return e.className="MapChartDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e}(c.b),_r=function(t){function e(){var e=t.call(this)||this;e.scaleRatio=1,e.zoomDuration=1e3,e.zoomEasing=nr.cubicOut,e.minZoomLevel=1,e.maxZoomLevel=32,e._prevZoomGeoPoint={latitude:0,longitude:0},e.className="MapChart",e.projection=new Jo,e.deltaLongitude=0,e.deltaLatitude=0,e.deltaGamma=0,e.maxPanOut=.7,e.homeZoomLevel=1,e.zoomStep=2,e.layout="absolute",e.centerMapOnZoomOut=!0,e.padding(0,0,0,0),qo.used(e.backgroundSeries),e.minWidth=10,e.minHeight=10,e.events.once("inited",e.handleAllInited,e,!1);var n=e.seriesContainer;n.visible=!1,n.inert=!0,n.resizable=!0,n.events.on("transformed",e.handleMapTransform,e,!1),n.events.on("doublehit",e.handleDoubleHit,e,!1),n.events.on("dragged",e.handleDrag,e,!1),n.zIndex=0,n.dragWhileResize=!0,e.events.on("maxsizechanged",function(t){0!=t.previousWidth&&0!=t.previousHeight||(e.updateExtremes(),e.updateCenterGeoPoint())},void 0,!1);var i=e.chartContainer;i.parent=e,i.zIndex=-1,e._disposers.push(e.events.on("maxsizechanged",function(){if(e.inited){e._mapAnimation&&e._mapAnimation.stop();var t=!0;e.series.each(function(e){e.updateTooltipBounds(),e.inited&&!e.dataInvalid||(t=!1)}),t&&e.updateScaleRatio(),e.zoomToGeoPoint(e._zoomGeoPointReal,e.zoomLevel,!0,0)}},void 0,!1));var o=i.background;o.fillOpacity=0,o.events.on("down",function(t){e.seriesContainer.dragStart(t.target.interactions.downPointers.getIndex(0))},e),o.events.on("up",function(t){e.seriesContainer.dragStop()},e),o.events.on("doublehit",e.handleDoubleHit,e),o.focusable=!0,i.events.on("down",e.handleMapDown,e,!1),e.background.fillOpacity=0,e.background.readerTitle=e.language.translate("Use plus and minus keys on your keyboard to zoom in and out"),e._disposers.push(Object(br.b)().body.events.on("keyup",function(t){if(e.topParent.hasFocused&&(!e._zoomControl||!e._zoomControl.thumb.isFocused))switch(er.b.getEventKey(t.event)){case"up":e.pan({x:0,y:.1});break;case"down":e.pan({x:0,y:-.1});break;case"left":e.pan({x:.1,y:0});break;case"right":e.pan({x:-.1,y:0})}},e)),e.mouseWheelBehavior="zoom";var r=Object(br.b)();e._disposers.push(r.body.events.on("down",e.handlePanDown,e)),e._disposers.push(r.body.events.on("up",e.handlePanUp,e));var a=e.seriesContainer.createChild(Ko.a);return a.radius=10,a.inert=!0,a.isMeasured=!1,a.events.on("transformed",e.handlePanMove,e,!1),a.interactionsEnabled=!1,a.opacity=0,a.x=0,a.y=0,e.panSprite=a,e.panBehavior="move",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.handlePanDown=function(t){var e=qo.documentPointToSvg(t.pointer.point,this.htmlContainer);e.x>0&&e.y>0&&e.x<this.svgContainer.width&&e.y<this.svgContainer.height&&(this._downPointOrig=qo.documentPointToSprite(t.pointer.point,this.seriesContainer),this.panSprite.moveTo(this._downPointOrig),this.panSprite.dragStart(t.pointer),this._downDeltaLongitude=this.deltaLongitude,this._downDeltaLatitude=this.deltaLatitude)},e.prototype.handlePanUp=function(t){this._downPointOrig&&this.panSprite.dragStop(t.pointer),this._downPointOrig=void 0},e.prototype.handlePanMove=function(){if(!this.seriesContainer.isResized){var t=this.projection.d3Projection,e=this.panBehavior;if("move"!=e&&"none"!=e&&this._downPointOrig&&t.rotate){var n=t.rotate(),i=n[0],o=n[1],r=n[2];t.rotate([0,0,0]);var a=this.projection.invert(this._downPointOrig),s={x:this.panSprite.pixelX,y:this.panSprite.pixelY},u=void 0;s&&(u=this.projection.invert(s)),t.rotate([i,o,r]),u&&("rotateLat"!=e&&"rotateLongLat"!=e||(this.deltaLatitude=this._downDeltaLatitude+u.latitude-a.latitude),"rotateLong"!=e&&"rotateLongLat"!=e||(this.deltaLongitude=this._downDeltaLongitude+u.longitude-a.longitude))}}},e.prototype.handleAllInited=function(){var t=this,e=!0;if(this.seriesContainer.visible=!0,this.series.each(function(t){t.inited&&!t.dataInvalid||(e=!1)}),e)this.updateCenterGeoPoint(),this.updateScaleRatio(),this.goHome(0);else{var n=f.c.events.once("exitframe",function(){t.removeDispose(n),t.handleAllInited()},this,!1);this.addDisposer(n)}},e.prototype.updateZoomGeoPoint=function(){var t=qo.svgPointToSprite({x:this.innerWidth/2+this.pixelPaddingLeft,y:this.innerHeight/2+this.pixelPaddingTop},this.series.getIndex(0)),e=this.projection.invert(t);this._zoomGeoPointReal=e},e.prototype.updateCenterGeoPoint=function(){var t,e,n,i;if(this.backgroundSeries){var o=this.backgroundSeries.getFeatures();if(o.length>0){var r=this.projection.d3Path.bounds(o[0].geometry);t=r[0][0],n=r[0][1],e=r[1][0],i=r[1][1]}}else this.series.each(function(o){var r=o.group.node.getBBox();(t>r.x||!d.isNumber(t))&&(t=r.x),(e<r.x+r.width||!d.isNumber(e))&&(e=r.x+r.width),(n>r.y||!d.isNumber(n))&&(n=r.y),(i<r.y+r.height||!d.isNumber(i))&&(i=r.y+r.height)});this.seriesMaxLeft=t,this.seriesMaxRight=e,this.seriesMaxTop=n,this.seriesMaxBottom=i,this.seriesWidth=e-t,this.seriesHeight=i-n,this.seriesWidth>0&&this.seriesHeight>0?(this.chartContainer.visible=!0,this._centerGeoPoint=this.projection.invert({x:t+(e-t)/2,y:n+(i-n)/2}),this._zoomGeoPointReal&&d.isNumber(this._zoomGeoPointReal.latitude)||(this._zoomGeoPointReal=this._centerGeoPoint)):this.chartContainer.visible=!1},e.prototype.handleDrag=function(){var t=this.zoomLevel*this.scaleRatio,e=this.seriesHeight*t,n=this.seriesContainer,i=this.seriesMaxLeft*t,o=this.seriesMaxRight*t,r=this.seriesMaxTop*t,a=this.seriesMaxBottom*t,s=n.pixelX,u=n.pixelY,c=this.maxPanOut,l=Math.min(this.maxWidth*(1-c)-this.seriesWidth*t-i,-i);s<l&&(s=l);var h=Math.max(this.maxWidth*c-i,this.maxWidth-o);s>h&&(s=h);var p=Math.min(this.maxHeight*(1-c)-e-r,-r);u<p&&(u=p);var f=Math.max(this.maxHeight*c-r,this.maxHeight-a);u>f&&(u=f),n.moveTo({x:s,y:u},void 0,void 0,!0),this._zoomGeoPointReal=this.zoomGeoPoint},e.prototype.applyInternalDefaults=function(){t.prototype.applyInternalDefaults.call(this),d.hasValue(this.readerTitle)||(this.readerTitle=this.language.translate("Map"))},e.prototype.handleMapDown=function(){this._mapAnimation&&this._mapAnimation.stop()},e.prototype.handleDoubleHit=function(t){var e=qo.documentPointToSvg(t.point,this.htmlContainer,this.svgContainer.cssScale),n=this.svgPointToGeo(e);this.zoomIn(n)},e.prototype.handleWheel=function(t){var e=this.seriesContainer.interactions.inertias.getKey("move");e&&e.done();var n=qo.documentPointToSvg(t.point,this.htmlContainer,this.svgContainer.cssScale),i=this.svgPointToGeo(n);t.shift.y<0?this.zoomIn(i,void 0,this.interactions.mouseOptions.sensitivity):this.zoomOut(i,void 0,this.interactions.mouseOptions.sensitivity)},Object.defineProperty(e.prototype,"mouseWheelBehavior",{get:function(){return this.getPropertyValue("mouseWheelBehavior")},set:function(t){this.setPropertyValue("mouseWheelBehavior",t)&&("none"!=t?(this._mouseWheelDisposer=this.chartContainer.events.on("wheel",this.handleWheel,this,!1),this._disposers.push(this._mouseWheelDisposer)):(this._mouseWheelDisposer&&this._mouseWheelDisposer.dispose(),this.chartContainer.wheelable=!1))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"panBehavior",{get:function(){return this.getPropertyValue("panBehavior")},set:function(t){if(this.setPropertyValue("panBehavior",t)){var e=this.seriesContainer;switch(this.panSprite.draggable=!1,e.draggable=!1,t){case"move":e.draggable=!0;break;default:this.panSprite.draggable=!0}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"centerMapOnZoomOut",{get:function(){return this.getPropertyValue("centerMapOnZoomOut")},set:function(t){this.setPropertyValue("centerMapOnZoomOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"projection",{get:function(){return this.getPropertyValue("projection")},set:function(t){var e=this;this.setPropertyValue("projection",t)&&(this.invalidateProjection(),t.chart=this,this._backgroundSeries&&this._backgroundSeries.invalidate(),this.series.each(function(t){t.events.once("validated",function(){e.updateCenterGeoPoint(),e.updateScaleRatio(),e.goHome(0)})}))},enumerable:!0,configurable:!0}),e.prototype.validateDataItems=function(){t.prototype.validateDataItems.call(this),this.updateExtremes()},e.prototype.updateExtremes=function(){var t,e,n,i;this.series.each(function(o){o.ignoreBounds||o instanceof yr&&o.fitExtent||((o.north>e||!d.isNumber(e))&&(e=o.north),(o.south<i||!d.isNumber(i))&&(i=o.south),(o.west<n||!d.isNumber(n))&&(n=o.west),(o.east>t||!d.isNumber(t))&&(t=o.east))});var o=[],r=!1;this.series.each(function(t){t instanceof yr&&!t.fitExtent&&(o=t.getFeatures(),r=!0)}),r||this.series.each(function(t){t.ignoreBounds||t instanceof yr&&t.fitExtent||(o=o.concat(t.getFeatures()))});var a=g.max(50,this.innerWidth),s=g.max(50,this.innerHeight),u=this.projection.d3Projection;if(o.length>0&&u&&(this.east!=t||this.west!=n||this.north!=e||this.south!=i)){if(this.east=t,this.west=n,this.north=e,this.south=i,u.rotate){var c=u.rotate(),l=c[1],h=c[2];this.deltaLongitude=c[0],this.deltaLatitude=l,this.deltaGamma=h}var p={type:"FeatureCollection",features:o},f=u.scale();if(u.fitSize([a,s],p),u.scale()!=f&&this.invalidateDataUsers(),this.series.each(function(t){t instanceof yr&&t.invalidateData()}),this._backgroundSeries){var m=this._backgroundSeries.mapPolygons.getIndex(0);m&&(m.multiPolygon=Wo(this.north,this.east,this.south,this.west))}this._fitWidth=a,this._fitHeight=s}this._zoomGeoPointReal&&d.isNumber(this._zoomGeoPointReal.latitude)||this.goHome(0)},e.prototype.updateScaleRatio=function(){var t;this.updateCenterGeoPoint(),t=g.min(this.innerWidth/this.seriesWidth,this.innerHeight/this.seriesHeight),(d.isNaN(t)||t==1/0)&&(t=1),t!=this.scaleRatio&&(this.scaleRatio=t,Yo.each(this.series.iterator(),function(e){e.scale=t,e.updateTooltipBounds()}),this.backgroundSeries.scale=t,this.dispatch("scaleratiochanged"))},e.prototype.svgPointToGeo=function(t){var e=this.series.getIndex(0);if(e){var n=qo.svgPointToSprite(t,e);return this.seriesPointToGeo(n)}},e.prototype.geoPointToSVG=function(t){var e=this.series.getIndex(0);if(e){var n=this.geoPointToSeries(t);return qo.spritePointToSvg(n,e)}},e.prototype.seriesPointToGeo=function(t){return this.projection.invert(t)},e.prototype.geoPointToSeries=function(t){return this.projection.convert(t)},Object.defineProperty(e.prototype,"geodata",{get:function(){return this._geodata},set:function(t){t!=this._geodata&&(this._geodata=t,this.invalidateData(),this.dataUsers.each(function(t){for(var e=t.data.length-1;e>=0;e--)1==t.data[e].madeFromGeoData&&t.data.splice(e,1);t.disposeData(),t.invalidateData()}))},enumerable:!0,configurable:!0}),e.prototype.zoomToGeoPoint=function(t,e,n,i,o){var r=this;if(t||(t=this.zoomGeoPoint),t&&d.isNumber(t.longitude)&&d.isNumber(t.latitude)){this._zoomGeoPointReal=t,e=g.fitToRange(e,this.minZoomLevel,this.maxZoomLevel);var a=this.projection.convert(t);if(a){var s=this.geoPointToSVG(t),u=qo.svgPointToSprite(s,this);n&&(u={x:this.innerWidth/2,y:this.innerHeight/2}),d.isNumber(i)||(i=this.zoomDuration);var c=u.x-a.x*e*this.scaleRatio,l=u.y-a.y*e*this.scaleRatio;return!o&&e<this.zoomLevel&&this.centerMapOnZoomOut&&e<1.5&&(c=this.innerWidth/2-(this.seriesMaxLeft+(this.seriesMaxRight-this.seriesMaxLeft)/2)*e*this.scaleRatio,l=this.innerHeight/2-(this.seriesMaxTop+(this.seriesMaxBottom-this.seriesMaxTop)/2)*e*this.scaleRatio),this._mapAnimation=this.seriesContainer.animate([{property:"scale",to:e},{property:"x",from:this.seriesContainer.pixelX,to:c},{property:"y",from:this.seriesContainer.pixelY,to:l}],i,this.zoomEasing),this._disposers.push(this._mapAnimation.events.on("animationended",function(){r._zoomGeoPointReal=r.zoomGeoPoint})),this.seriesContainer.validatePosition(),this._mapAnimation}}},e.prototype.zoomToMapObject=function(t,e,n,i){null==n&&(n=!0);var o=this.seriesContainer.interactions.inertias.getKey("move");if(o&&o.done(),t instanceof Co)return d.isNaN(e)&&(e=5),this.zoomToGeoPoint({latitude:t.latitude,longitude:t.longitude},e,n,i,!0);var r=t.dataItem;if(r&&d.isNumber(r.zoomLevel)&&(e=r.zoomLevel),t instanceof Ho){var a=t.dataItem,s=t.polygon.bbox;0!=s.width&&0!=s.height||(s=t.polygon.group.getBBox()),d.isNumber(e)||(e=Math.min(this.seriesWidth/s.width,this.seriesHeight/s.height));var u=void 0;if(a&&d.hasValue(a.zoomGeoPoint))u=a.zoomGeoPoint;else{var c=qo.spritePointToSprite({x:s.x+s.width/2,y:s.y+s.height/2},t.polygon,t.series);u=this.seriesPointToGeo(c)}return this.zoomToGeoPoint(u,e,!0,i,!0)}},e.prototype.zoomToRectangle=function(t,e,n,i,o,r,a){d.isNaN(o)&&(o=1);var s=o*Math.min((this.south-this.north)/(n-t),(this.west-this.east)/(i-e));return this.zoomToGeoPoint({latitude:t+(n-t)/2,longitude:i+(e-i)/2},s,r,a,!0)},e.prototype.zoomIn=function(t,e,n){void 0===n&&(n=1);var i=1+(this.zoomStep-1)*n;return i<1&&(i=1),this.zoomToGeoPoint(t,this.zoomLevel*i,!1,e)},e.prototype.zoomOut=function(t,e,n){void 0===n&&(n=1);var i=1+(this.zoomStep-1)*n;return i<1&&(i=1),this.zoomToGeoPoint(t,this.zoomLevel/i,!1,e)},e.prototype.pan=function(t,e){var n=this.geoPointToSVG(this.zoomGeoPoint);n.x+=this.pixelWidth*t.x,n.y+=this.pixelHeight*t.y,this.zoomToGeoPoint(this.svgPointToGeo(n),this.zoomLevel,!0,e,!0)},Object.defineProperty(e.prototype,"zoomGeoPoint",{get:function(){var t=qo.spritePointToSvg({x:this.pixelWidth/2,y:this.pixelHeight/2},this);return this.svgPointToGeo(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomLevel",{get:function(){return this.seriesContainer.scale},set:function(t){this.seriesContainer.scale=t},enumerable:!0,configurable:!0}),e.prototype.handleMapTransform=function(){this.zoomLevel!=this._prevZoomLevel&&(this.dispatch("zoomlevelchanged"),this._prevZoomLevel=this.zoomLevel),!this.zoomGeoPoint||this._prevZoomGeoPoint.latitude==this.zoomGeoPoint.latitude&&this._prevZoomGeoPoint.longitude==this.zoomGeoPoint.longitude||this.dispatch("mappositionchanged")},Object.defineProperty(e.prototype,"smallMap",{get:function(){if(!this._smallMap){var t=new tr;this.smallMap=t}return this._smallMap},set:function(t){this._smallMap&&this.removeDispose(this._smallMap),this._smallMap=t,this._smallMap.chart=this,t.parent=this.chartContainer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomControl",{get:function(){return this._zoomControl},set:function(t){this._zoomControl&&this.removeDispose(this._zoomControl),this._zoomControl=t,t.chart=this,t.parent=this.chartContainer,t.plusButton.exportable=!1,t.minusButton.exportable=!1},enumerable:!0,configurable:!0}),e.prototype.createSeries=function(){return new Oo},Object.defineProperty(e.prototype,"deltaLongitude",{get:function(){return this.getPropertyValue("deltaLongitude")},set:function(t){this.setPropertyValue("deltaLongitude",rr(t))&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaLatitude",{get:function(){return this.getPropertyValue("deltaLatitude")},set:function(t){this.setPropertyValue("deltaLatitude",t)&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deltaGamma",{get:function(){return this.getPropertyValue("deltaGamma")},set:function(t){this.setPropertyValue("deltaGamma",t)&&(this.rotateMap(),this.updateZoomGeoPoint())},enumerable:!0,configurable:!0}),e.prototype.rotateMap=function(){this.projection.d3Projection&&this.projection.d3Projection.rotate&&(this.projection.d3Projection.rotate([this.deltaLongitude,this.deltaLatitude,this.deltaGamma]),this.invalidateProjection())},Object.defineProperty(e.prototype,"maxPanOut",{get:function(){return this.getPropertyValue("maxPanOut")},set:function(t){this.setPropertyValue("maxPanOut",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homeGeoPoint",{get:function(){return this.getPropertyValue("homeGeoPoint")},set:function(t){this.setPropertyValue("homeGeoPoint",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"homeZoomLevel",{get:function(){return this.getPropertyValue("homeZoomLevel")},set:function(t){this.setPropertyValue("homeZoomLevel",t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zoomStep",{get:function(){return this.getPropertyValue("zoomStep")},set:function(t){this.setPropertyValue("zoomStep",t)},enumerable:!0,configurable:!0}),e.prototype.invalidateProjection=function(){this.invalidateDataUsers(),this.updateCenterGeoPoint()},Object.defineProperty(e.prototype,"geodataSource",{get:function(){return this._dataSources.geodata||this.getDataSource("geodata"),this._dataSources.geodata},set:function(t){var e=this;this._dataSources.geodata&&this.removeDispose(this._dataSources.geodata),this._dataSources.geodata=t,this._dataSources.geodata.component=this,this.events.on("inited",function(){e.loadData("geodata")},this,!1),this.setDataSourceEvents(t,"geodata")},enumerable:!0,configurable:!0}),e.prototype.processConfig=function(e){if(d.hasValue(e.geodata)&&d.isString(e.geodata)){var n=e.geodata;if(d.hasValue(window["am4geodata_"+e.geodata]))e.geodata=window["am4geodata_"+e.geodata];else try{e.geodata=JSON.parse(e.geodata)}catch(i){throw Error("MapChart error: Geodata `"+n+"` is not loaded or is incorrect.")}}d.hasValue(e.projection)&&d.isString(e.projection)&&(e.projection=this.createClassInstance(e.projection)),d.hasValue(e.smallMap)&&!d.hasValue(e.smallMap.type)&&(e.smallMap.type="SmallMap"),d.hasValue(e.zoomControl)&&!d.hasValue(e.zoomControl.type)&&(e.zoomControl.type="ZoomControl"),t.prototype.processConfig.call(this,e)},e.prototype.handleSeriesAdded=function(e){t.prototype.handleSeriesAdded.call(this,e);var n=e.newValue;n.scale=this.scaleRatio,n.events.on("validated",this.updateCenterGeoPoint,this,!1)},e.prototype.configOrder=function(e,n){return e==n?0:"smallMap"==e?1:"smallMap"==n?-1:"series"==e?1:"series"==n?-1:t.prototype.configOrder.call(this,e,n)},e.prototype.asIs=function(e){return"projection"==e||"geodata"==e||t.prototype.asIs.call(this,e)},Object.defineProperty(e.prototype,"centerGeoPoint",{get:function(){return this._centerGeoPoint},enumerable:!0,configurable:!0}),e.prototype.goHome=function(t){var e=this.homeGeoPoint;e||(e=this.centerGeoPoint),e&&this.zoomToGeoPoint(e,this.homeZoomLevel,!0,t,!0)},e.prototype.setPaper=function(e){return this.svgContainer&&(this.svgContainer.hideOverflow=!0),t.prototype.setPaper.call(this,e)},Object.defineProperty(e.prototype,"backgroundSeries",{get:function(){var t=this;if(!this._backgroundSeries){var e=new Uo;e.parent=this.seriesContainer,e.chart=this,e.hiddenInLegend=!0,e.addDisposer(new l.b(function(){t._backgroundSeries=void 0})),this._disposers.push(e);var n=(new h.a).getFor("background"),i=e.mapPolygons.template.polygon;i.stroke=n,i.fill=n,i.fillOpacity=0,i.strokeOpacity=0,e.mapPolygons.create(),this._backgroundSeries=e}return this._backgroundSeries},enumerable:!0,configurable:!0}),e.prototype.setLegend=function(e){t.prototype.setLegend.call(this,e),e.parent=this},e.prototype.setTapToActivate=function(e){t.prototype.setTapToActivate.call(this,e),this.seriesContainer.interactions.isTouchProtected=!0,this.panSprite.interactions.isTouchProtected=!0},e.prototype.handleTapToActivate=function(){t.prototype.handleTapToActivate.call(this),this.seriesContainer.interactions.isTouchProtected=!1,this.panSprite.interactions.isTouchProtected=!1},e.prototype.handleTapToActivateDeactivation=function(){t.prototype.handleTapToActivateDeactivation.call(this),this.seriesContainer.interactions.isTouchProtected=!0,this.panSprite.interactions.isTouchProtected=!0},e.prototype.asFunction=function(e){return"zoomEasing"==e||t.prototype.asIs.call(this,e)},e}(c.a);f.c.registeredClasses.MapChart=_r;var xr=n("JecN"),Sr=function(t){function e(){var e=t.call(this)||this;return e.className="MapSpline",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createLine=function(){this.line=new xr.a,this.line.tensionX=.8,this.line.tensionY=.8},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e}(fr);f.c.registeredClasses.MapSpline=Sr;var Mr=n("tOm2"),jr=function(t){function e(){var e=t.call(this)||this;return e.className="MapArc",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createLine=function(){this.line=new Mr.a},Object.defineProperty(e.prototype,"shortestDistance",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),e}(fr);f.c.registeredClasses.MapArc=jr;var Or=function(t){function e(){var e=t.call(this)||this;return e.className="MapSplineSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e}(dr),Lr=function(t){function e(){var e=t.call(this)||this;return e.className="MapSplineSeries",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new Or},e.prototype.createLine=function(){return new Sr},e}(gr);f.c.registeredClasses.MapSplineSeries=Lr,f.c.registeredClasses.MapSplineSeriesDataItem=Or;var wr=function(t){function e(){var e=t.call(this)||this;return e.className="MapArcSeriesDataItem",e.applyTheme(),e}return Object(u.__extends)(e,t),e}(dr),Cr=function(t){function e(){var e=t.call(this)||this;return e.className="MapArcSeries",e.applyTheme(),e}return Object(u.__extends)(e,t),e.prototype.createDataItem=function(){return new wr},e.prototype.createLine=function(){return new jr},e}(gr);f.c.registeredClasses.MapArcSeries=Cr,f.c.registeredClasses.MapArcSeriesDataItem=wr;var Er=n("n+jt"),Ir=n("2Uh3"),Tr=function(t){function e(){var e=t.call(this)||this;e._chart=new l.d,e.className="ZoomControl",e.align="right",e.valign="bottom",e.layout="vertical",e.padding(5,5,5,5);var n=new h.a,i=e.createChild(Er.a);i.shouldClone=!1,i.label.text="+",e.plusButton=i;var o=e.createChild(Lo.a);o.shouldClone=!1,o.background.fill=n.getFor("alternativeBackground"),o.background.fillOpacity=.05,o.background.events.on("hit",e.handleBackgroundClick,e,!1),o.events.on("sizechanged",e.updateThumbSize,e,!1),e.slider=o;var r=o.createChild(Er.a);r.shouldClone=!1,r.padding(0,0,0,0),r.draggable=!0,r.events.on("drag",e.handleThumbDrag,e,!1),e.thumb=r;var a=e.createChild(Er.a);return a.shouldClone=!1,a.label.text="-",e.minusButton=a,e.thumb.role="slider",e.thumb.readerLive="polite",e.thumb.readerTitle=e.language.translate("Use arrow keys to zoom in and out"),e.minusButton.readerTitle=e.language.translate("Press ENTER to zoom in"),e.plusButton.readerTitle=e.language.translate("Press ENTER to zoom out"),e.applyTheme(),e.events.on("propertychanged",function(t){"layout"==t.property&&e.fixLayout()},void 0,!1),e._disposers.push(e._chart),e.fixLayout(),e}return Object(u.__extends)(e,t),e.prototype.fixLayout=function(){var t=this.plusButton,e=this.minusButton,n=this.thumb,i=this.slider;t.x=void 0,t.y=void 0,e.x=void 0,e.y=void 0,n.x=void 0,n.y=void 0,i.x=void 0,i.y=void 0,t.padding(6,10,6,10),e.padding(6,10,6,10),e.label.align="center",e.label.valign="middle",t.label.align="center",t.label.valign="middle","vertical"==this.layout?(this.width=40,this.height=void 0,e.width=Object(pr.c)(100),e.height=void 0,n.width=Object(pr.c)(100),n.height=void 0,t.width=Object(pr.c)(100),t.height=void 0,i.width=Object(pr.c)(100),e.marginTop=1,t.marginBottom=2,i.height=0,e.toFront(),t.toBack(),n.minX=0,n.maxX=0,n.minY=0):"horizontal"==this.layout&&(this.height=40,this.width=void 0,e.height=Object(pr.c)(100),e.width=void 0,t.height=Object(pr.c)(100),t.width=void 0,n.height=Object(pr.c)(100),n.width=void 0,n.minX=0,n.minY=0,n.maxY=0,i.height=Object(pr.c)(100),i.width=0,e.toBack(),t.toFront())},e.prototype.handleBackgroundClick=function(t){var e=t.target,n=t.spritePoint.y,i=this.chart,o=Math.log(i.maxZoomLevel)/Math.LN2,r=Math.log(i.minZoomLevel)/Math.LN2,a=Math.pow(2,(e.pixelHeight-n)/e.pixelHeight*(r+(o-r)));i.zoomToGeoPoint(i.zoomGeoPoint,a)},Object.defineProperty(e.prototype,"chart",{get:function(){return this._chart.get()},set:function(t){var e=this;this._chart.set(t,new l.c([t.events.on("maxsizechanged",this.updateThumbSize,this,!1),t.events.on("zoomlevelchanged",this.updateThumb,this,!1),this.minusButton.events.on("hit",function(){t.zoomOut(t.zoomGeoPoint)},t,!1),Object(br.b)().body.events.on("keyup",function(n){e.topParent.hasFocused&&(er.b.isKey(n.event,"enter")?e.minusButton.isFocused?t.zoomOut():e.plusButton.isFocused&&t.zoomIn():er.b.isKey(n.event,"plus")?t.zoomIn():er.b.isKey(n.event,"minus")&&t.zoomOut())},t),this.plusButton.events.on("hit",function(){t.zoomIn(t.zoomGeoPoint)},t,!1)]))},enumerable:!0,configurable:!0}),e.prototype.updateThumbSize=function(){if(this.chart){var t=this.slider,e=this.thumb;"vertical"==this.layout?(e.minHeight=Math.min(this.slider.pixelHeight,20),e.height=t.pixelHeight/this.stepCount,e.maxY=t.pixelHeight-e.pixelHeight,e.visible=!(e.pixelHeight<=1)):(e.minWidth=Math.min(this.slider.pixelWidth,20),e.width=t.pixelWidth/this.stepCount,e.maxX=t.pixelWidth-e.pixelWidth,e.visible=!(e.pixelWidth<=1))}},e.prototype.updateThumb=function(){var t=this.slider,e=this.thumb;if(!e.isDown){var n=(Math.log(this.chart.zoomLevel)-Math.log(this.chart.minZoomLevel))/Math.LN2;"vertical"==this.layout?e.y=t.pixelHeight-(t.pixelHeight-e.pixelHeight)*n/this.stepCount-e.pixelHeight:e.x=t.pixelWidth*n/this.stepCount}},e.prototype.handleThumbDrag=function(){var t,e=this.slider,n=this.chart,i=this.thumb;t=Math.log(this.chart.minZoomLevel)/Math.LN2+(t="vertical"==this.layout?this.stepCount*(e.pixelHeight-i.pixelY-i.pixelHeight)/(e.pixelHeight-i.pixelHeight):this.stepCount*i.pixelX/e.pixelWidth);var o=Math.pow(2,t);n.zoomToGeoPoint(void 0,o,!1,0)},Object.defineProperty(e.prototype,"stepCount",{get:function(){return Math.log(this.chart.maxZoomLevel)/Math.LN2-Math.log(this.chart.minZoomLevel)/Math.LN2},enumerable:!0,configurable:!0}),e.prototype.createBackground=function(){return new Ir.a},e}(Lo.a);f.c.registeredClasses.ZoomControl=Tr;var Gr=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=Ji(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.Mercator=Gr;var Dr=Math.abs,Nr=Math.atan,zr=(Math,Math,Math.cos),Vr=Math.exp,Ar=(Math,Math.log),Fr=(Math,Math,Math,Math,Math,Math.sin),Rr=Math.tan,kr=1e-6,Br=Math.PI,Wr=Br/2,Hr=Br/4;function Zr(t){return t>1?Wr:t<-1?-Wr:Math.asin(t)}function qr(t){return t>0?Math.sqrt(t):0}function Yr(t,e){return[t,1.25*Ar(Rr(Hr+.4*e))]}Math,Yr.invert=function(t,e){return[t,2.5*Nr(Vr(.8*e))-.625*Br]};var Xr=function(){return zi(Yr).scale(108.318)},Ur=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=Xr(),e}return Object(u.__extends)(e,t),e}(Jo);function Jr(t,e){for(var n=(1+Wr)*Fr(e),i=0,o=1/0;i<10&&Dr(o)>kr;i++)e-=o=(e+Fr(e)-n)/(1+zr(e));return n=qr(2+Br),[t*(1+zr(e))/n,2*e/n]}f.c.registeredClasses.Miller=Ur,Jr.invert=function(t,e){var n=1+Wr,i=qr(n/2);return[2*t*i/(1+zr(e*=i)),Zr((e+Fr(e))/n)]};var Kr=function(){return zi(Jr).scale(173.044)},Qr=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=Kr(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.Eckert6=Qr;var $r=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=Po(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.Orthographic=$r;var ta=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=xo(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.Stereographic=ta;var ea=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=ki(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.Albers=ea;var na=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=Bi(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.AlbersUsa=na;var ia=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=yo(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.NaturalEarth1=ia;var oa=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=qi(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.AzimuthalEqualArea=oa;var ra=function(t){function e(){var e=t.call(this)||this;return e.d3Projection=ho(),e}return Object(u.__extends)(e,t),e}(Jo);f.c.registeredClasses.EqualEarth=ra,n.d(e,"LegendDataItem",function(){return a.b}),n.d(e,"Legend",function(){return a.a}),n.d(e,"LegendSettings",function(){return a.c}),n.d(e,"HeatLegend",function(){return s.a}),n.d(e,"MapChartDataItem",function(){return Pr}),n.d(e,"MapChart",function(){return _r}),n.d(e,"MapSeriesDataItem",function(){return jo}),n.d(e,"MapSeries",function(){return Oo}),n.d(e,"MapObject",function(){return wo}),n.d(e,"MapPolygon",function(){return Ho}),n.d(e,"MapImage",function(){return Co}),n.d(e,"MapLine",function(){return fr}),n.d(e,"MapLineObject",function(){return sr}),n.d(e,"MapSpline",function(){return Sr}),n.d(e,"MapArc",function(){return jr}),n.d(e,"Graticule",function(){return mr}),n.d(e,"MapPolygonSeriesDataItem",function(){return Xo}),n.d(e,"MapPolygonSeries",function(){return Uo}),n.d(e,"MapLineSeriesDataItem",function(){return dr}),n.d(e,"MapLineSeries",function(){return gr}),n.d(e,"MapSplineSeriesDataItem",function(){return Or}),n.d(e,"MapSplineSeries",function(){return Lr}),n.d(e,"MapImageSeriesDataItem",function(){return ur}),n.d(e,"MapImageSeries",function(){return cr}),n.d(e,"MapArcSeriesDataItem",function(){return wr}),n.d(e,"MapArcSeries",function(){return Cr}),n.d(e,"GraticuleSeriesDataItem",function(){return vr}),n.d(e,"GraticuleSeries",function(){return yr}),n.d(e,"multiPolygonToGeo",function(){return Do}),n.d(e,"multiLineToGeo",function(){return No}),n.d(e,"multiPointToGeo",function(){return zo}),n.d(e,"pointToGeo",function(){return Ao}),n.d(e,"multiGeoPolygonToMultipolygon",function(){return ko}),n.d(e,"getBackground",function(){return Wo}),n.d(e,"multiGeoLineToMultiLine",function(){return Ro}),n.d(e,"multiGeoToPoint",function(){return Vo}),n.d(e,"getCircle",function(){return Bo}),n.d(e,"ZoomControl",function(){return Tr}),n.d(e,"SmallMap",function(){return tr}),n.d(e,"Projection",function(){return Jo}),n.d(e,"projections",function(){return r}),n.d(e,"geo",function(){return o}),n.d(e,"d3geo",function(){return i})},mYRP:function(t,e,n){"use strict";var i=n("+jW5");function o(t,e,n){var o,s,u,c;e=e||1;for(var l=0;l<t[0].length;l++){var h=t[0][l];(!l||h[0]<o)&&(o=h[0]),(!l||h[1]<s)&&(s=h[1]),(!l||h[0]>u)&&(u=h[0]),(!l||h[1]>c)&&(c=h[1])}var p=u-o,f=c-s,d=Math.min(p,f),g=d/2,m=new i(null,r);if(0===d)return[o,s];for(var v=o;v<u;v+=d)for(var y=s;y<c;y+=d)m.push(new a(v+g,y+g,g,t));var b=function(t){for(var e=0,n=0,i=0,o=t[0],r=0,s=o.length,u=s-1;r<s;u=r++){var c=o[r],l=o[u],h=c[0]*l[1]-l[0]*c[1];n+=(c[0]+l[0])*h,i+=(c[1]+l[1])*h,e+=3*h}return 0===e?new a(o[0][0],o[0][1],0,t):new a(n/e,i/e,0,t)}(t),P=new a(o+p/2,s+f/2,0,t);P.d>b.d&&(b=P);for(var _=m.length;m.length;){var x=m.pop();x.d>b.d&&(b=x,n&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,_)),x.max-b.d<=e||(m.push(new a(x.x-(g=x.h/2),x.y-g,g,t)),m.push(new a(x.x+g,x.y-g,g,t)),m.push(new a(x.x-g,x.y+g,g,t)),m.push(new a(x.x+g,x.y+g,g,t)),_+=4)}return n&&(console.log("num probes: "+_),console.log("best distance: "+b.d)),[b.x,b.y]}function r(t,e){return e.max-t.max}function a(t,e,n,i){this.x=t,this.y=e,this.h=n,this.d=function(t,e,n){for(var i=!1,o=1/0,r=0;r<n.length;r++)for(var a=n[r],u=0,c=a.length,l=c-1;u<c;l=u++){var h=a[u],p=a[l];h[1]>e!=p[1]>e&&t<(p[0]-h[0])*(e-h[1])/(p[1]-h[1])+h[0]&&(i=!i),o=Math.min(o,s(t,e,h,p))}return(i?1:-1)*Math.sqrt(o)}(t,e,i),this.max=this.d+this.h*Math.SQRT2}function s(t,e,n,i){var o=n[0],r=n[1],a=i[0]-o,s=i[1]-r;if(0!==a||0!==s){var u=((t-o)*a+(e-r)*s)/(a*a+s*s);u>1?(o=i[0],r=i[1]):u>0&&(o+=a*u,r+=s*u)}return(a=t-o)*a+(s=e-r)*s}t.exports=o,t.exports.default=o}}]);